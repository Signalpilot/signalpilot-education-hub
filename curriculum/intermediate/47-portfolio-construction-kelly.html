<!doctype html>
<html lang="en" dir="ltr" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5, viewport-fit=cover"/>
  <title>Portfolio Construction & Kelly Criterion: Optimal Capital Allocation â€” Signal Pilot</title>
  <link rel="canonical" href="https://education.signalpilot.io/curriculum/intermediate/47-portfolio-construction-kelly.html">
  <meta name="sp-level" content="Intermediate"><meta name="sp-order" content="47">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Gugi&family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/signalpilot-theme.css">
  <link rel="stylesheet" href="/assets/edu.css">
  <link rel="stylesheet" href="/assets/notes.css">
  <link rel="stylesheet" href="/assets/auth-ui.css">
  <link rel="stylesheet" href="/assets/chatbot.css">
  <!-- Logger must load first, before other scripts that use it -->
  <script src="/assets/logger.js"></script>
  <script src="/assets/dev-utils.js" defer></script>
<script src="/assets/structured-data.js" defer></script>
<script src="/assets/lazy-load.js" defer></script>
<script defer data-domain="signalpilot.io" src="https://plausible.io/js/script.js"></script>
</head>
<body>
<div class="bg-stars" aria-hidden="true"></div>
<canvas id="constellations" class="sp-constellations" aria-hidden="true"></canvas>
<div class="bg-aurora" aria-hidden="true"></div>
<header class="sp-header">
  <div class="wrap">
    <a href="https://signalpilot.io" class="brand">
      <span>Signal Pilot</span>
    </a>
    <nav id="mainnav" aria-label="Main"><ul>
      <li><a href="/">Education</a></li>
      <li><a href="/search.html">Search</a></li>
      <li><a href="/my-library.html">ðŸ“š My Library</a></li>
    </ul></nav>
    <div class="header-ctls"><button id="themeToggle" class="btn btn-ghost btn-sm" type="button" aria-label="Toggle theme">
        <span id="theme-icon">ðŸŒ™</span>
      </button><button id="menuToggle" class="menu-toggle" aria-expanded="false">Menu â˜°</button></div>
  </div>
</header>
<article class="article">
  <header>
    <div class="wrap">
<nav class="breadcrumb" aria-label="Breadcrumb">
    <a href="/index.html">Home</a> &gt;
    <a href="/">Curriculum</a> &gt;
    <a href="/intermediate.html">Intermediate</a> &gt;
    <span>Lesson 47</span>
  </nav>
  <div class="lesson-badges">
        <span class="badge">ðŸŸ¡ Intermediate â€¢ Lesson 47 of 82</span>
    <span class="badge badge-time">~17 min</span>
  </div>
  <h1 class="headline xl">Portfolio Construction: Building an Edge-Based System</h1>
  <p><b>Your edge isn't in ONE great tradeâ€”it's in how you allocate capital across HUNDREDS of trades.</b></p>
      <!-- Article Progress Indicator -->
      <div class="article-progress" style="--progress:0%">
        <div class="progress-circle"><span>0%</span></div>
        <div class="progress-text">
          <strong>You're making progress!</strong>
          <div style="font-size:.85rem;color:var(--muted)">Keep reading to mark this lesson complete</div>
        </div>
      </div>
  <p>Professional traders don't just find good setups. They build portfolios that maximize expected returns while controlling risk. This lesson teaches you how to construct a portfolio like an institutional fund manager.</p>
  <div class="callout callout-success">
    <h4>ðŸ’° How Kelly Criterion Saved a $500K Account</h4>
    <p>A prop trader had a proven strategy: 58% win rate, avg win $450, avg loss $300. Using fixed 2% risk per trade, his annual return was 28% with 15% max drawdown.</p>
    <p><strong>The Optimization:</strong> He calculated optimal Kelly position sizing:</p>
    <ul>
      <li><strong>Kelly % = (Win% Ã— Avg Win - Loss% Ã— Avg Loss) / Avg Win</strong></li>
      <li>= (0.58 Ã— $450 - 0.42 Ã— $300) / $450 = 0.297 = 29.7% optimal risk</li>
      <li><strong>Half Kelly (safer):</strong> 29.7% / 2 = 14.9% â†’ rounded to 3% per trade</li>
    </ul>
    <p><strong>Results after 12 months:</strong></p>
    <ul>
      <li><strong>Old (2% fixed):</strong> +$140K profit, Sharpe 1.2, max DD 15%</li>
      <li><strong>New (3% Kelly):</strong> +$238K profit (+70% more), Sharpe 1.4, max DD 18%</li>
    </ul>
    <p><strong>Lesson:</strong> Kelly Criterion mathematically optimizes position sizing based on YOUR edge. Using it increased returns by 70% with only 3% more drawdown.</p>
  </div>
  <div class="callout-warning">
    <h4>ðŸ“‰ CASE STUDY: Lisa's $91K Full Kelly Disaster (Apr-Jun 2024)</h4>
    <p><strong>Trader:</strong> Lisa Chang, 34, options trader ($185K account), former data scientist</p>
    <p><strong>Strategy:</strong> Credit spreads, historical 68% win rate, 2.1:1 reward:risk</p>
    <p><strong>Fatal flaw:</strong> Used FULL Kelly Criterion (optimal f = 16.8% per trade), experienced catastrophic drawdowns from Kelly variance</p>
    <p><strong>Result:</strong> Lost $91K (-49%) in 3 months despite positive edge, learned Kelly is theoretical maximum not practical optimum</p>

    <p><strong>Background:</strong> Lisa discovered Kelly Criterion formula: f* = (p Ã— b - q) / b, where p = win rate, q = loss rate, b = win/loss ratio. Her stats: 68% win rate, avg win $840, avg loss $400 (2.1:1). Kelly calculation: (0.68 Ã— 2.1 - 0.32) / 2.1 = 16.8% per trade. "Kelly is mathematically optimal," she thought. "I'll bet 16.8% per trade for maximum growth."</p>

    <p><strong>The disaster (Apr-Jun 2024):</strong></p>
    <ul style="margin:.75rem 0 0 1.5rem">
      <li><strong>Week 1-2:</strong> 12 trades, 9 winners (75%), +$7,560 using full Kelly (16.8% risk/trade). Account: $192,560. "Kelly works!"</li>
      <li><strong>Week 3:</strong> Hit losing streak: 6 consecutive losses (probability: 0.32^6 = 0.1% but it happened). Each loss -16.8% of account. Cumulative DD: -62.4% (compounding). Account dropped $192K â†’ $72K in ONE WEEK.</li>
      <li><strong>Week 4-8:</strong> Tried to recover but emotionally shaken. Reduced to half-Kelly (8.4%), slow recovery.</li>
      <li><strong>Final result:</strong> Account $94K after 12 weeks. Loss: -$91K (-49%). Despite having 68% win rate edge, full Kelly variance destroyed her.</li>
    </ul>

    <p><strong>What Lisa learned:</strong> Full Kelly is THEORETICAL maximum, not PRACTICAL optimum. Kelly assumes: (1) infinite bankroll, (2) no emotions, (3) perfect execution, (4) stable edge forever. Reality: variance causes 40-70% drawdowns with full Kelly. Professional standard: Use 1/4 to 1/2 Kelly for survivable drawdowns.</p>

    <p><strong>Recovery (July-Dec 2024):</strong> Switched to 1/4 Kelly (4.2% per trade). Result: $94K â†’ $147K (+56%) in 6 months. Max DD: -12% (manageable). Same edge, vastly different risk profile.</p>

    <p style="margin-top:1rem;padding:1rem;background:rgba(139,92,246,.08);border-radius:8px;border-left:4px solid #8b5cf6">
      <strong>Lisa's advice:</strong> "Full Kelly is a trap. It's mathematically optimal for GROWTH but practically suicidal for SURVIVAL. I had 68% win rate (solid edge) but lost 49% in 3 months using full Kelly because ONE bad week (6-trade losing streak) caused -62% drawdown. Switched to 1/4 Kelly, recovered $53K in 6 months with -12% max DD. Kelly tells you the theoretical maxâ€”use 25-50% of that number for real trading. Growth means nothing if you blow up first."
    </p>

    <p>You've completed half of this lesson.</p>
    <p style="margin-top:0.5rem;font-size:0.9rem">Great progress! Keep going...</p>
  </div>

  <h2 id="part-4-dynamic-position-sizing">Part 4: Dynamic Position Sizing</h2>

  <h3>Fixed-Fraction vs Dynamic Kelly</h3>
  <p><strong>Fixed-Fraction:</strong> Always risk same % (e.g., 1% per trade)</p>
  <p><strong>Dynamic Kelly:</strong> Adjust size based on recent performance</p>

  <h3>Equity Curve Trading</h3>
  <p><strong>Concept:</strong> Increase size when winning, decrease when losing</p>
  <p><strong>Method:</strong></p>
  <ul>
    <li>Calculate 20-day moving average of equity curve</li>
    <li>If equity &gt; MA: Increase position size by 25% (edge working)</li>
    <li>If equity &lt; MA: Decrease position size by 50% (edge broken or regime shift)</li>
  </ul>

  <p><strong>Benefit:</strong> Automatically scales risk to match performance (compound winners, limit losers)</p>

  <details class="accordion">
    <summary>Example: Equity Curve Position Adjustment</summary>
    <div class="accordion-content">
      <p><strong>Baseline:</strong> Account = $100K, Standard risk = 1% = $1,000/trade</p>

      <p><strong>Scenario 1: Hot streak (equity &gt; 20-day MA)</strong></p>
      <ul>
        <li>Account now: $108K</li>
        <li>Equity &gt; MA (trending up)</li>
        <li>Adjusted risk: 1% Ã— 1.25 = 1.25%</li>
        <li>Risk per trade: $108K Ã— 1.25% = $1,350</li>
      </ul>

      <p><strong>Scenario 2: Cold streak (equity &lt; 20-day MA)</strong></p>
      <ul>
        <li>Account now: $97K</li>
        <li>Equity &lt; MA (trending down)</li>
        <li>Adjusted risk: 1% Ã— 0.5 = 0.5%</li>
        <li>Risk per trade: $97K Ã— 0.5% = $485</li>
      </ul>

      <p><strong>Result:</strong> Risk more when edge is working, less when it's not (dynamic adaptation)</p>
    </div>
  </details>

  <h2 id="part-5-using-signal-pilot-for-portfolio-construction">Part 5: Using Signal Pilot for Portfolio Construction</h2>

  <h3>Janus Atlas: Multi-Strategy Overlay</h3>
  <p><strong>Feature:</strong> Visualize all active strategies on same chart (identify correlation)</p>
  <p><strong>Use case:</strong> If all your setups trigger on same day â†’ high correlation â†’ reduce total size</p>

  <h3>Pentarch Pilot Line: Edge Validation</h3>
  <p><strong>Feature:</strong> Compare your entries vs institutional flow</p>
  <p><strong>Signal:</strong> If Pilot Line confirms your setup (institutional flow aligned) â†’ increase size to Kelly %</p>
  <p><strong>Warning:</strong> If Pilot Line contradicts setup (institutions selling, you buying) â†’ reduce size to 0.5Ã— Kelly</p>

  <h3>Harmonic Oscillator: Regime Detection for Sizing</h3>
  <p><strong>Feature:</strong> Identify trending vs mean-reverting regimes</p>
  <p><strong>Application:</strong> Increase potential breakout strategy allocation in trending regime, increase mean-reversion allocation in ranging regime</p><h2 id="quiz-test-your-understanding">Quiz: Test Your Understanding</h2>
  <div class="quiz">
    <div class="quiz-question">
      <p><strong>Q1:</strong> Your system: 60% win rate, $400 avg win, $200 avg loss. What's the Kelly %?</p>
      <details>
        <summary>Show Answer</summary>
        <p><strong>Answer:</strong> p = 0.6, q = 0.4, b = $400/$200 = 2. Kelly = (0.6 Ã— 2 - 0.4) / 2 = (1.2 - 0.4) / 2 = 0.4 = 40%. But use quarter Kelly (10%) or half Kelly (20%) in practice to reduce volatility.</p>
      </details>
    </div>

    <div class="quiz-question">
      <p><strong>Q2:</strong> You have 3 strategies with Kelly %: 20%, 25%, 30%. Correlation = 0.8. Should you allocate 75% total?</p>
      <details>
        <summary>Show Answer</summary>
        <p><strong>Answer:</strong> No. High correlation (0.8) means strategies are essentially the same bet. Reduce each allocation by ~30-40% to account for correlation. Adjusted total: ~45-50%, not 75%. Otherwise you're over-leveraged to one market regime.</p>
      </details>
    </div><div class="quiz-question">
      <p><strong>Q3:</strong> Your equity curve drops below its 20-day MA. What should you do with position sizing?</p>
      <details>
        <summary>Show Answer</summary>
        <p><strong>Answer:</strong> Reduce position size by 50% (cut risk from 1% to 0.5% per trade). Equity below MA signals your edge may be impaired or market regime has shifted. Protect capital until equity crosses back above MA, then resume normal sizing.</p>
      </details>
    </div>
  </div>

  <h2 id="practical-checklist">Practical Checklist</h2>
  <div class="checklist">
    <h4>Portfolio Construction Workflow:</h4>
    <ul>
      <li>Backtest each strategy: Calculate win rate, win/loss ratio</li>
      <li>Calculate Kelly % for each strategy (use quarter or half Kelly)</li>
      <li>Identify correlation between strategies (do they win/lose together?)</li>
      <li>Reduce allocation to highly correlated strategies (correlation &gt;0.6)</li>
      <li>Cap total portfolio allocation at 100% (or your risk tolerance)</li>
      <li>Implement equity curve tracking (20-day MA)</li>
      <li>Adjust sizing based on equity vs MA (increase when above, decrease when below)</li>
    </ul>
    <h4>Pre-Trade Kelly Check:</h4>
    <ul>
      <li>Identify which strategy this setup belongs to</li>
      <li>Check remaining allocation for that strategy (have you hit Kelly limit?)</li>
      <li>Check portfolio heat: Total risk across all positions &lt; 10%?</li>
      <li>Use Signal Pilot Pentarch Pilot Line to confirm edge (institutional flow aligned?)</li>
      <li>If edge confirmed, use full (quarter/half) Kelly. If not, use 0.5Ã— Kelly or skip</li>
    </ul>
  </div>

  <div class="key-takeaway">
    <h4>Key Takeaways</h4>
    <ul>
      <li><strong>Kelly Criterion mathematically optimizes sizing</strong> based on edge (win rate Ã— win/loss ratio)</li>
      <li><strong>Never use full Kelly</strong> (too volatile) â€” use 0.25-0.5Ã— Kelly</li>
      <li><strong>Correlation matters:</strong> Reduce allocation to correlated strategies (they're the same bet)</li>
      <li><strong>Dynamic sizing:</strong> Increase when equity &gt; MA, decrease when &lt; MA</li>
      <li><strong>Portfolio heat cap:</strong> Total risk across all positions should never exceed 10%</li>
      <li><strong>Overconfidence kills accounts:</strong> Even with a proven 60% win rate and 2:1 R:R (20% full Kelly), a 7-trade losing streak happens ~1.6% of the time (1-2 times per year with 100 trades/year). Full Kelly would lose 22% of your account in that streak. Quarter Kelly loses only 4-5%. The math says "bet big," but psychology says "survive to trade tomorrow." Always fractional Kelly.</li>
    </ul>
  </div>

  <div class="related-lessons">
    <h4>Related Lessons</h4>
    <ul>
      <li><a href="46-advanced-risk-management.html">Lesson 46: Advanced Risk Management</a></li>
      <li><a href="/curriculum/beginner/20-swing-trading-framework.html">Lesson 20: Swing Trading Framework</a></li>
      <li><a href="/curriculum/advanced/66-quantitative-strategy-design.html">Lesson 66: Quantitative Strategy Design</a></li>
    </ul>
  </div>

  <div class="downloads">
    <h4>Downloads</h4>
    <ul>
      <li><a href="/downloads/kelly-calculator.xlsx">Kelly Criterion Calculator (Excel)</a></li>
      <li><a href="/downloads/portfolio-allocation-tracker.xlsx">Portfolio Allocation Tracker (Excel)</a></li>
      <li><a href="/downloads/equity-curve-monitor.xlsx">Equity Curve Monitor (Excel)</a></li>
    </ul>
  </div>

    </div>

    <aside class="toc-sidebar">
      <div class="lesson-actions">
        <button id="bookmark-btn" class="btn btn-secondary btn-block">ðŸ”– Bookmark</button>
        <button onclick="window.print()" class="btn btn-secondary btn-block">ðŸ“„ Save PDF</button>
      </div>
    </aside>
  </div>

  <div class="wrap nav-article">
  <a class="btn btn-ghost" href="/curriculum/intermediate/46-advanced-risk-management.html">&larr; Previous Lesson</a>
  <a class="btn btn-primary" href="/curriculum/advanced/48-institutional-order-flow.html">Next Lesson &rarr;</a>
  </div>
</article>
<footer class="sp-footer"><div class="wrap"><div>Â© <span id="year"></span> Signal Pilot Labs, Inc.</div><div class="links"><a href="https://signalpilot.io/privacy.html">Privacy</a><a href="https://signalpilot.io/terms.html">Terms</a></div></div></footer>

<script src="/assets/edu.js"></script>
<script src="/assets/edu-enhanced.js"></script>
<script src="/assets/sp-bg.js"></script>
<script>
document.getElementById('year').textContent = new Date().getFullYear();
</script>
<!-- SignalPilot Theme Switcher -->
<script src="/assets/signalpilot-theme.js"></script>
<script src="/assets/spaced-repetition.js" defer></script>
<script src="/assets/chatbot.js" defer></script>
<script src="/assets/notes.js" defer></script>
<script src="/assets/analytics.js"></script>
<script src="/assets/quiz-enhanced.js"></script>
<script src="/assets/social-share.js"></script>
<script src="/assets/pwa-init.js"></script>
<script src="/assets/config.js"></script>
<script src="/assets/supabase-client.js"></script>
<script src="/assets/auth-ui.js"></script>
  <script src="/assets/library.js"></script>
    <!-- Enhanced Analytics & A/B Testing -->
  <script src="/assets/enhanced-analytics.js" defer></script>
  <script src="/assets/ab-test-tldr.js" defer></script>
</body>
</html>