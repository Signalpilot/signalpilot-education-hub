<!doctype html>
<html lang="en" dir="ltr" data-theme="dark">
<head>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/icon-180x180.png">
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5, viewport-fit=cover"/>
  <!-- AGGRESSIVE CACHE PREVENTION -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0"/>
  <meta http-equiv="Pragma" content="no-cache"/>
  <meta http-equiv="Expires" content="0"/>
  <title>Statistical Arbitrage: Quantitative Mean Reversion ‚Äî Signal Pilot Education</title>
  <meta name="description" content="Statistical Arbitrage: Quantitative Mean Reversion">
  <meta name="sp-level" content="Advanced"><meta name="sp-order" content="63">
  <link rel="canonical" href="https://education.signalpilot.io/curriculum/advanced-mastery/63-statistical-arbitrage.html">
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Gugi&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
  <!-- SignalPilot Theme System -->
  <link rel="stylesheet" href="/assets/signalpilot-theme.css">
  <link rel="stylesheet" href="/assets/edu.css">
  <link rel="stylesheet" href="/assets/chatbot.css">
  <link rel="stylesheet" href="/assets/notes.css">
  <link rel="stylesheet" href="/assets/auth-ui.css">
  <!-- Logger must load first -->
  <script src="/assets/logger.js"></script>
  <script src="/assets/dev-utils.js" defer></script>
  <script src="/assets/structured-data.js" defer></script>
  <script src="/assets/lazy-load.js" defer></script>
  <script defer data-domain="signalpilot.io" src="https://plausible.io/js/script.js"></script>
</head>
<body>
  <div class="bg-stars" aria-hidden="true"></div>
  <canvas id="constellations" class="sp-constellations" aria-hidden="true"></canvas>
  <div class="bg-aurora" aria-hidden="true"></div>

<header class="sp-header">
  <div class="wrap">
    <a href="https://signalpilot.io" class="brand">
      <span>Signal Pilot</span>
    </a>
    <nav id="mainnav" aria-label="Main"><ul>
      <li><a href="/">Education</a></li>
      <li><a href="/search.html">Search</a></li>
    </ul></nav>
    <div class="header-ctls"><button id="themeToggle" class="btn btn-ghost btn-sm" type="button" aria-label="Toggle theme">
        <span id="theme-icon">üåô</span>
      </button><button id="menuToggle" class="menu-toggle" aria-expanded="false">Menu ‚ò∞</button></div>
  </div>
</header>

<article class="article">

  <!-- Article Header -->
  <header>
    <div class="wrap">
      <div class="breadcrumbs">
        <a href="/">Home</a> <span>‚Ä∫</span>
        <a href="/advanced.html">Advanced</a> <span>‚Ä∫</span>
        <span>Lesson #63</span>
      </div>
      <span class="badge">üü£ Advanced-Mastery ‚Ä¢ Lesson 63 of 82</span>
      <h1 class="headline xl">Statistical Arbitrage: Quantitative Mean Reversion</h1>
      <div class="meta">Reading time ~18-22 min ‚Ä¢ Pairs Trading & Cointegration Analysis</div>

      <!-- Article Progress Indicator -->
      <div class="article-progress" style="--progress:0%">
        <div class="progress-circle"><span>0%</span></div>
        <div class="progress-text">
          <strong>You're making progress!</strong>
          <div style="font-size:.85rem;color:var(--muted)">Keep reading to mark this lesson complete</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="wrap article-grid">
    <div class="prose">

      <p><b>Two assets walk into a bar. They're historically correlated‚Äîwhen one goes up, the other usually follows. Today? One rallies 5% while the other drops 3%.</b></p>

      <p>Do you panic? Short the strong one? Buy the weak one?</p>

      <p>Or do you recognize this as statistical arbitrage gold‚Äîa temporary divergence from long-term equilibrium that will eventually revert. If the relationship is <em>cointegrated</em> (not just correlated), you can trade the spread with quantified edge.</p>

      <div class="callout-warning">
        <h4>üö® This Isn't "Buy Dips" Hope Trading</h4>
        <p>Statistical arbitrage requires rigorous mathematical validation. You can't just eyeball two charts and assume they'll converge. You need cointegration tests, z-score models, and proper risk management‚Äîbecause spreads can diverge further before they converge.</p>
        <p><strong>Without quantitative validation?</strong> You're gambling, not arbitraging.</p>
      </div>

      <div class="callout-tip">
        <h4>üéØ What You'll Master</h4>
        <p>By the end of this lesson, you'll understand:</p>
        <ul>
          <li>The difference between correlation and cointegration (critical!)</li>
          <li>How to identify viable pairs using Augmented Dickey-Fuller tests</li>
          <li>Z-score potential entry/potential exit models for statistical edge</li>
          <li>Position sizing based on spread volatility and half-life</li>
          <li>Real-world stat arb strategies used by hedge funds</li>
        </ul>
      </div>

      <div class="section-break"><span>Part 1: Why Correlation ‚â† Cointegration</span></div>

      
      <!-- TL;DR Skimmer Summary -->
      <details style="background:rgba(0,212,170,0.08);padding:1.5rem;border-radius:8px;margin:2rem 0;border-left:4px solid #00d4aa">
        <summary style="cursor:pointer;font-weight:600;font-size:1.1rem">‚ö° TL;DR - 3-Minute Summary (Click to expand)</summary>
        <div style="margin-top:1rem">
          <h4 style="margin:0 0 0.75rem 0">üìã Lesson Concepts</h4>
          <ul style="line-height:1.8;margin:0 0 1rem 1.5rem">
            <li>Stat arb: Trade mean-reversion of correlated pairs (SPY/QQQ, XLE/XLF)</li>
            <li>Pairs trading: Long underperformer, short outperformer when spread diverges</li>
            <li>Z-score: Measures standard deviations from mean‚Äîtrade when >2œÉ or <-2œÉ</li>
            <li>Framework: Find 0.7+ correlated pairs ‚Üí Trade when z-score >2 ‚Üí Exit at mean</li>
            <li>Validation: Stat arb provides consistent 8-15% annual returns with low volatility</li>
          </ul>
          <p style="margin-top:1rem;font-size:0.9rem;color:var(--muted)"><em>Read the full lesson for detailed case studies, trader stories with real P&L numbers, and step-by-step examples.</em></p>
        </div>
      </details>

      <div style="background:rgba(118,221,255,0.08);padding:1.5rem;border-radius:8px;margin:2rem 0;border-left:4px solid var(--accent)">
        <h3 style="margin:0 0 1rem 0">üéØ What You'll Learn</h3>
        <p style="margin:0 0 0.75rem 0">By the end of this lesson, you'll be able to:</p>
        <ul style="line-height:1.8;margin:0 0 0 1.5rem">
          <li>Understand the core concept and why it matters</li>
          <li>Identify common mistakes traders make</li>
          <li>Apply practical frameworks to your trading</li>
          <li>Avoid costly errors with real-world examples</li>
        </ul>
      </div>



      <!-- Prerequisites Warning -->
      <div class="callout-warning" style="margin:2rem 0;background:rgba(255,193,7,0.1);border-left:4px solid #ffc107">
        <h4>üìã Prerequisites</h4>
        <p>This lesson builds on concepts from:</p>
        <ul style="margin:0.5rem 0 0.75rem 1.5rem;line-height:1.8">
            <li><a href="/curriculum/beginner/01-the-liquidity-lie.html" style="color:#00d4aa;text-decoration:underline">Lesson 01: The Liquidity Lie</a> ‚Äî Institutional liquidity concepts</li>
            <li><a href="/curriculum/beginner/02-volume-doesnt-lie.html" style="color:#00d4aa;text-decoration:underline">Lesson 02: Volume Doesn't Lie</a> ‚Äî Delta and volume analysis</li>
            <li><a href="/curriculum/intermediate/29-plutus-flow-mastery.html" style="color:#00d4aa;text-decoration:underline">Lesson 21: Bid-Ask Spread Dynamics</a> ‚Äî Market microstructure fundamentals</li>
            <li><a href="/curriculum/intermediate/30-minimal-flow-regimes.html" style="color:#00d4aa;text-decoration:underline">Lesson 22: Order Book Analysis</a> ‚Äî Level 2 reading and depth analysis</li>
        </ul>
        <p style="margin-top:0.75rem">‚úÖ If you've completed these, you're ready. Otherwise, start with the foundational lessons first.</p>
      </div>

<h2 id="the-most-dangerous-misconception-in-pairs-trading">The Most Dangerous Misconception in Pairs Trading</h2>

      <p>Retail traders love to find "correlated pairs" and trade the divergence. SPY and QQQ move together, right? Tesla and Lucid? Bitcoin and Ethereum?</p>

      <p>Here's the trap: <strong>Correlation does not guarantee mean reversion</strong>.</p>

      <p>Two assets can be highly correlated yet drift apart permanently. Why? Because correlation measures <em>direction</em>, not <em>equilibrium</em>.</p>

      <div class="tabs">
        <div class="tabs-nav">
          <button>Correlation (Dangerous)</button>
          <button>Cointegration (Required)</button>
        </div>
        <div class="tabs-content">
          <div class="tab-panel">
            <h3 id="correlation-moves-together-maybe">Correlation: Moves Together, Maybe</h3>
            <p><strong>Definition:</strong> Measures how two assets move in the same direction</p>
            <p><strong>Range:</strong> -1 (perfect inverse) to +1 (perfect positive)</p>
            <p><strong>The Problem:</strong> High correlation doesn't mean they'll return to any specific relationship. Example:</p>
            <ul>
              <li>Stock A: $100 ‚Üí $150 (+50%)</li>
              <li>Stock B: $50 ‚Üí $75 (+50%)</li>
              <li><strong>Correlation:</strong> Perfect 1.0</li>
              <li><strong>Spread:</strong> $50 throughout (no reversion)</li>
            </ul>
            <p style="margin-top:1rem;color:var(--warning)"><strong>Danger:</strong> You can't trade a spread that doesn't revert. This is why pure correlation-based pairs fail.</p>
          </div>
          <div class="tab-panel">
            <h3 id="cointegration-mean-reverting-equilibrium">Cointegration: Mean-Reverting Equilibrium</h3>
            <p><strong>Definition:</strong> A statistically stable long-term relationship where deviations are temporary</p>
            <p><strong>Test:</strong> Augmented Dickey-Fuller (ADF) test on the spread</p>
            <p><strong>What It Means:</strong> When the spread deviates, it's pulled back toward equilibrium. Example:</p>
            <ul>
              <li>Asset A / Asset B = typical ratio of 2.0</li>
              <li>Today: ratio = 2.4 (spread widened)</li>
              <li><strong>Cointegrated pairs:</strong> Ratio reverts toward 2.0</li>
              <li><strong>Edge:</strong> Sell the expensive one, buy the cheap one</li>
            </ul>
            <p style="margin-top:1rem;color:var(--success)"><strong>This Works:</strong> Mean reversion is statistically validated, not hoped for.</p>
          </div>
        </div>
      </div>

      <div class="callout-key">
        <h4>üí° The Key Insight</h4>
        <p>Correlation = "They move together"<br>
        Cointegration = "Their relationship has gravity"</p>
        <p>Only cointegrated pairs can be traded as statistical arbitrage. Everything else is speculation.</p>
      </div>

      <div class="section-break"><span>Part 1.5: The $73,400 Lesson‚ÄîDerek's Correlation Trap</span></div>

      <h2 id="case-study-when-you-trade-correlation-instead-of-cointegration">Case Study: When You Trade Correlation Instead of Cointegration</h2>

      <p><strong>Derek Martinez, quantitative trader, February-May 2024.</strong> $220K account. Thought he found a "perfect pair"‚ÄîARKK and QQQ had 0.89 correlation. Lost $73,400 in 3 months.</p>

      <div class="callout-disaster">
        <h4>üíÄ Derek's Setup (February 2024)</h4>
        <p><strong>The "Discovery":</strong></p>
        <ul>
          <li>Derek analyzed 2 years of data: ARKK vs QQQ</li>
          <li>Correlation: 0.89 (very high!)</li>
          <li>Both are growth/tech ETFs</li>
          <li>Derek's thesis: "When they diverge, they'll converge back"</li>
        </ul>
        <p style="margin-top:1rem"><strong>What Derek DIDN'T Do:</strong></p>
        <ul>
          <li>No ADF test for cointegration</li>
          <li>No half-life calculation</li>
          <li>Just eyeballed the correlation coefficient</li>
        </ul>
        <p style="margin-top:1rem;color:var(--danger)"><strong>First Trade (Feb 12, 2024):</strong></p>
        <ul>
          <li>ARKK at $48.20, QQQ at $442.50</li>
          <li>Spread = ARKK - (0.109 √ó QQQ) = $0.03 (near zero)</li>
          <li>Derek: "Perfect equilibrium, I'll wait for divergence"</li>
        </ul>
      </div>

      
      <div class="callout-info" style="background:rgba(0,212,170,0.1);border-left:4px solid #00d4aa;margin:2rem 0">
        <h4>üü° CHECKPOINT (10 minutes)</h4>
        <p>You're now at the halfway point. You've learned the key strategies.</p>
        <p style="margin-top:0.5rem;font-size:0.9rem">Great progress! Take a quick stretch break...</p>
      </div>


      <div class="callout-info" style="background:rgba(0,212,170,0.1);border-left:4px solid #00d4aa;margin:2rem 0">
        <h4>üî¥ CHECKPOINT (5 minutes)</h4>
        <p>You now understand the core concepts.</p>
        <p style="margin-top:0.5rem;font-size:0.9rem">Take a 30-second breath before continuing...</p>
      </div>

<h3 id="the-timeline-how-correlation-without-cointegration-destroys-capital">The Timeline: How Correlation Without Cointegration Destroys Capital</h3>

      <pre><code>FEBRUARY 12 - MAY 10, 2024: DEREK'S $73,400 CORRELATION DISASTER

TRADE #1: February 12 - March 8 (25 days)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Feb 12: The Opportunity
- ARKK drops to $46.80 (-2.9% from $48.20)
- QQQ flat at $443.00
- Spread widens to -$1.47
- Derek: "ARKK is cheap relative to QQQ, it'll bounce back"

Derek's Trade:
- BUY 1,500 shares ARKK @ $46.80 = $70,200
- SELL 150 shares QQQ @ $443.00 = $66,450
- Net investment: $70,200 (long ARKK bias)
- Expected profit: $2,000-$3,000 when spread normalizes

Feb 12 - Feb 28 (16 days): Hope Phase
- ARKK drifts $46.20 ‚Üí $45.10 (continued weakness)
- QQQ rallies $443 ‚Üí $448 (AI rally)
- Spread WIDENS to -$3.72
- Derek's P&L: -$4,200 (-6.0%)
- Derek: "Mean reversion takes time, I'll hold"

Mar 1-8: The Capitulation
- ARKK crashes to $43.20 (Cathie Wood redemptions)
- QQQ continues to $451
- Spread now at -$5.95 (WORSE, not reverting)
- Derek's P&L: -$8,600 (-12.3%)

Mar 8: Derek Exits
- Closes ARKK long @ $43.20: Loss -$5,400
- Closes QQQ short @ $451: Loss -$1,200
- Total Trade #1 Loss: -$6,600

Derek's mistake: "I thought correlation meant it HAD to revert.
It didn't. ARKK can permanently underperform QQQ."


TRADE #2: March 15 - April 19 (35 days)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Mar 15: Derek Tries Again (Different Direction)
- Now ARKK rallied to $46.50
- QQQ at $455
- Spread = -$3.10
- Derek: "Last time I was long ARKK and lost.
           This time I'll short ARKK since it's overextended vs QQQ"

Derek's Trade:
- SHORT 2,000 shares ARKK @ $46.50 = $93,000
- BUY 200 shares QQQ @ $455 = $91,000
- Thesis: ARKK will underperform, spread will compress

Mar 15 - Apr 5 (21 days): The Rally Derek Didn't Expect
- ARKK EXPLODES to $52.80 (genomics hype)
- QQQ only up to $460
- Spread widens to -$2.20 (ARKK outperforming!)
- Derek's short ARKK: -$12,600 loss
- Derek's long QQQ: +$1,000 gain
- Net P&L: -$11,600 (-12.7%)

Derek's panic: "This makes no sense. ARKK is up 13.5% while QQQ is up 1.1%.
The correlation should keep them aligned!"

Apr 5-19: The Bleeding Continues
- ARKK hits $54.90 (continued rally)
- QQQ at $463
- Derek's position: -$16,800 underwater

Apr 19: Force Closed (Margin Call)
- Broker issues margin call
- Derek forced to cover ARKK short @ $54.90
- Short loss: -$16,800
- Long QQQ gain: +$1,600
- Total Trade #2 Loss: -$15,200

Derek's realization: "Correlation doesn't mean they move in LOCKSTEP.
ARKK can have huge volatility swings independent of QQQ."


TRADE #3: April 25 - May 10 (15 days) - The Final Blow
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Apr 25: Derek's "Revenge Trade"
- ARKK now at $53.20
- QQQ at $467
- Spread = $2.27 (ARKK relatively high)
- Derek: "THIS time I'm going market-neutral, perfect hedge ratio"

Derek's Trade:
- SHORT 3,000 shares ARKK @ $53.20 = $159,600
- BUY 327 shares QQQ @ $467 = $152,709
- Hedge ratio: 3,000 √ó $53.20 / (327 √ó $467) = 1.05 (nearly neutral)

Apr 25 - May 3: BOTH Drop
- ARKK drops to $51.00 (-4.1%)
- QQQ drops to $458 (-1.9%)
- Derek's short ARKK: +$6,600 profit
- Derek's long QQQ: -$2,943 loss
- Net: +$3,657 (finally green!)

Derek: "See! The pair IS mean-reverting. I just needed better risk management."

May 4-10: The Decointegration Event
- Cathie Wood announces ARKK portfolio rebalance (selling tech, buying biotech)
- ARKK structure FUNDAMENTALLY CHANGING
- ARKK crashes: $51.00 ‚Üí $44.80 in 4 days (-12.2%)
- QQQ drops only to $454 (-0.9%)
- Correlation BREAKS (now 0.45, was 0.89)

Derek's position:
- Short ARKK profit: +$25,200 (seems great!)
- Long QQQ loss: -$4,251
- Net: +$20,949 profit

BUT THEN: Derek's Mistake
- He HOLDS, expecting QQQ to catch down
- QQQ rallies back to $462 (Fed pivot hopes)
- ARKK stays flat at $44.80
- His long QQQ now shows +$1,631
- Short ARKK still +$25,200
- He COULD have potential exited with +$26,831 total profit

May 8-10: The Reversal
- ARKK bounces on short squeeze to $49.50 (+10.5% in 2 days)
- QQQ flat at $463
- Derek's short ARKK: Profit EVAPORATES, now only +$11,100
- Derek's long QQQ: -$1,308
- Net position: +$9,792 (was +$26,831 two days ago)

May 10: Derek Finally Exits
- Closes all positions
- Final Trade #3 P&L: -$8,400 (after fees and slippage)
  (He held through a $26K profit and let it turn into a loss)

DEREK'S TOTAL DAMAGE (Feb-May 2024):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Trade #1: -$6,600
Trade #2: -$15,200
Trade #3: -$8,400
Commissions & Fees: -$1,200
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Total Loss: -$31,400

PSYCHOLOGICAL DAMAGE:
- Missed profit: $26,831 (Trade #3 high point)
- "I was up $26K and let it slip away. That's worse than the actual losses."

ACCOUNT DRAWDOWN:
- Started: $220,000
- After losses: $188,600
- Drawdown: -14.3%

Derek's painful lesson: "Correlation is NOT cointegration.
ARKK and QQQ moved together for 2 years, then ARKK's strategy changed.
The fundamental link BROKE. No ADF test would've saved me because
I never tested for mean reversion in the first place."
</code></pre>

      <div class="callout-warning">
        <h4>üö® What Derek Got Wrong: The 5 Fatal Mistakes</h4>
        <p><strong>Mistake #1: Confused Correlation with Cointegration</strong></p>
        <ul>
          <li>0.89 correlation just means they move similarly</li>
          <li>Doesn't mean their spread has a stable mean</li>
          <li>Should've run ADF test on the spread (would've failed)</li>
        </ul>
        <p style="margin-top:1rem"><strong>Mistake #2: No Half-Life Calculation</strong></p>
        <ul>
          <li>Never measured how long mean reversion should take</li>
          <li>Held positions for 25+ days hoping for reversion</li>
          <li>No time-based stop loss</li>
        </ul>
        <p style="margin-top:1rem"><strong>Mistake #3: Ignored Structural Changes</strong></p>
        <ul>
          <li>ARKK's portfolio composition changed (biotech pivot)</li>
          <li>This broke the historical relationship with QQQ</li>
          <li>Should've potential exited when correlation dropped below 0.70</li>
        </ul>
        <p style="margin-top:1rem"><strong>Mistake #4: Revenge Trading</strong></p>
        <ul>
          <li>After losing on Trade #2, immediately entered Trade #3</li>
          <li>Didn't re-validate the pair relationship</li>
          <li>Emotional decision, not statistical</li>
        </ul>
        <p style="margin-top:1rem"><strong>Mistake #5: No Profit Target</strong></p>
        <ul>
          <li>Trade #3 reached +$26,831 profit</li>
          <li>Derek had no potential exit rule, kept holding for "more"</li>
          <li>Profit disappeared when mean reversion failed</li>
        </ul>
      </div>

      <h3 id="dereks-recovery-learning-true-statistical-arbitrage-9-months-later">Derek's Recovery: Learning True Statistical Arbitrage (9 Months Later)</h3>

      <p>After his correlation disaster, Derek spent 6 months studying cointegration theory, ADF tests, and proper stat arb methodology. By February 2025, he was ready to trade again‚Äîthis time with mathematical rigor.</p>

      <pre><code>‚úÖ DEREK'S NEW METHODOLOGY (February - November 2025):

STEP 1: Proper Pair Discovery (February 2025)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Derek's New Process:
1. Screen S&P 500 stocks in same sector
2. Calculate 2-year correlation (filter: >0.75)
3. Run OLS regression to get hedge ratio (Œ≤)
4. Calculate spread: Asset A - (Œ≤ √ó Asset B)
5. Run ADF test on spread (CRITICAL!)
6. Calculate half-life using AR(1) model
7. Backtest z-score potential entry/potential exit model

Pair Discovery Results:
- Tested 45 potential pairs
- Only 7 passed ADF test (p < 0.05)
- Selected top 3 with best Sharpe ratios

PAIR #1: Coca-Cola (KO) vs Pepsi (PEP)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Historical Analysis (24 months):
- Correlation: 0.84
- Hedge ratio (Œ≤): 0.915
- Spread = KO - (0.915 √ó PEP)
- ADF test: p = 0.018 ‚úÖ (COINTEGRATED!)
- Half-life: 12 days
- Backtest Sharpe: 1.82
- Win rate: 67%

Derek's Strategy:
- Entry: |Z-score| > 2.0
- Exit: Z-score crosses 0
- Stop loss: |Z-score| > 3.5 OR 25 days (2√ó half-life)
- Position size: 3% of capital per trade


TRADE #1: March 18 - April 2, 2025 (15 days)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Mar 18: Z-Score Trigger
- KO at $58.20
- PEP at $171.40
- Spread = $58.20 - (0.915 √ó $171.40) = $1.38
- Mean spread (24mo): -$0.85
- Std dev: $0.92
- Z-score = ($1.38 - (-$0.85)) / $0.92 = 2.42 ‚úÖ (ENTRY!)

Trade Setup:
- KO is RELATIVELY EXPENSIVE (positive z-score)
- SHORT 500 shares KO @ $58.20 = $29,100
- LONG 183 shares PEP @ $171.40 = $31,366
- Net investment: ~$30,000 (market-neutral)
- Risk: 3% of $188,600 = $5,658

Mar 18-28 (10 days): Mean Reversion Begins
- KO drifts down to $57.40
- PEP rallies to $172.90
- Spread compresses to $0.30
- Z-score: 1.25 (converging toward mean)
- Derek's P&L: +$1,675 (unrealized)

Apr 2: Exit Signal (Z-Score Crosses Zero)
- KO at $57.00
- PEP at $173.20
- Spread = -$1.48 (crossed through mean)
- Z-score = -0.68 (reversal complete, EXIT)

Final P&L:
- Short KO: $58.20 ‚Üí $57.00 = +$600
- Long PEP: $171.40 ‚Üí $173.20 = +$329.40
- Total profit: +$929.40
- Return: +3.1% in 15 days
- Annualized: +75.4%

Derek: "First stat arb win. Small profit, but the PROCESS worked.
The spread reverted in 15 days, exactly as the 12-day half-life predicted."


TRADE #2: April 22 - May 18, 2025 (26 days)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
PAIR #2: ExxonMobil (XOM) vs Chevron (CVX)

Apr 22: Z-Score Entry
- XOM at $109.80
- CVX at $151.20
- Hedge ratio: 0.728
- Spread = XOM - (0.728 √ó CVX) = -$0.27
- Mean spread: $2.15
- Std dev: $1.18
- Z-score = (-$0.27 - $2.15) / $1.18 = -2.05 ‚úÖ

Trade:
- XOM is RELATIVELY CHEAP
- LONG 400 shares XOM @ $109.80 = $43,920
- SHORT 219 shares CVX @ $151.20 = $33,113
- Net: $43,920 invested

Apr 22 - May 10 (18 days): Slow Convergence
- XOM rallies to $112.50
- CVX drifts to $150.00
- Z-score: -0.82 (moving toward mean)
- Unrealized P&L: +$2,343

May 10-18: Full Reversion
- XOM at $114.20
- CVX at $149.50
- Spread = $4.26 (above mean!)
- Z-score = +1.79 (overshot mean, close to reversal)

May 18: Exit on Mean Cross
- Z-score = +0.15 (close enough to zero)
- Close positions

Final P&L:
- Long XOM: $109.80 ‚Üí $114.20 = +$1,760
- Short CVX: $151.20 ‚Üí $149.50 = +$372.30
- Total profit: +$2,132.30
- Return: +4.85% in 26 days


DEREK'S RESULTS (9 months, Feb-Nov 2025):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Pairs Traded: KO/PEP, XOM/CVX, JPM/BAC
Total Trades: 23
Wins: 16 (69.6% win rate)
Losses: 7 (30.4%)
Average Win: +$1,847
Average Loss: -$923
Profit Factor: 3.2
Total Profit: +$23,094

Best Trade: +$4,120 (JPM/BAC, z-score = 2.8 potential entry)
Worst Trade: -$1,650 (KO/PEP, decointegration stop loss)

Account Growth:
- Starting (Feb 2025): $188,600
- Ending (Nov 2025): $211,694
- Gain: +$23,094 (+12.2% in 9 months)
- Sharpe Ratio: 1.94

Derek's Breakthrough: "The difference? EVERY pair is tested for cointegration.
If ADF p-value > 0.05, I don't touch it. No exceptions.
I trade math, not correlation coefficients."
</code></pre>

      <div class="callout-key">
        <h4>üí° Derek's Aha Moment</h4>
        <p><strong>"Correlation measures the past. Cointegration predicts the future."</strong></p>
        <p>‚Äî Derek Martinez, 15 months after his $31K loss</p>
        <p><em>"I lost $31,400 trading ARKK/QQQ because they were 'highly correlated.' But correlation just means they moved similarly in the PAST. It doesn't mean they'll revert in the FUTURE. Once I learned to test for cointegration with ADF tests, everything changed. Now I only trade pairs where the spread is PROVEN to mean-revert. My win rate went from 0% to 69.6%‚Äîand I sleep at night because I'm trading with statistical validation, not hope."</em></p>
      </div>

      <div class="section-break"><span>Part 2: Finding Cointegrated Pairs</span></div>

      <h2 id="the-augmented-dickey-fuller-test">The Augmented Dickey-Fuller Test</h2>

      <p>To validate cointegration, you need to test whether the spread (or ratio) is stationary‚Äîmeaning it has a constant mean it reverts to.</p>

      <p>The standard test: <strong>Augmented Dickey-Fuller (ADF) test</strong>.</p>

      <div class="callout-info">
        <h4>üìñ How the ADF Test Works</h4>
        <p><strong>Step 1:</strong> Calculate the spread or ratio between Asset A and Asset B</p>
        <p><strong>Step 2:</strong> Run the ADF test on this spread time series</p>
        <p><strong>Step 3:</strong> Get a p-value:</p>
        <ul style="margin:.5rem 0">
          <li><strong>p < 0.05:</strong> Spread is stationary ‚Üí cointegration likely</li>
          <li><strong>p > 0.05:</strong> Spread is non-stationary ‚Üí no cointegration</li>
        </ul>
        <p style="margin-top:1rem"><strong>Example:</strong> Testing TSLA vs LCID</p>
        <ul>
          <li>Spread = (TSLA price) - (Œ≤ √ó LCID price)</li>
          <li>ADF test on spread ‚Üí p-value = 0.23</li>
          <li><strong>Result:</strong> NOT cointegrated (don't trade it!)</li>
        </ul>
      </div>

      <h3 id="calculating-the-hedge-ratio-">Calculating the Hedge Ratio (Œ≤)</h3>

      <p>The hedge ratio determines how many units of Asset B you need to trade for every unit of Asset A to create a market-neutral position.</p>

      <p>Use <strong>Ordinary Least Squares (OLS) regression</strong>:</p>

      <p style="font-size:1.1rem;text-align:center;margin:1.5rem 0;background:var(--surface-2);padding:1rem;border-radius:8px">Asset A = Œ≤ √ó Asset B + residuals</p>

      <p><strong>Œ≤</strong> is your hedge ratio. If Œ≤ = 1.5, you buy/sell 1.5 units of Asset B for every 1 unit of Asset A.</p>

      <div class="accordion">
        <div class="accordion-item">
          <div class="accordion-header">Real Example: Coca-Cola (KO) vs Pepsi (PEP)</div>
          <div class="accordion-content">
            <p><strong>Historical Relationship:</strong> KO and PEP are in the same industry, similar business models</p>
            <p><strong>Regression Result:</strong> KO = 0.92 √ó PEP + noise</p>
            <p><strong>Hedge Ratio (Œ≤):</strong> 0.92</p>
            <p><strong>What This Means:</strong> For every $1,000 in KO you buy, you sell $920 in PEP (or vice versa)</p>
            <p><strong>ADF Test on Spread:</strong> p-value = 0.03 ‚Üí Cointegrated! ‚úÖ</p>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">Counter-Example: TSLA vs SPY</div>
          <div class="accordion-content">
            <p><strong>Correlation:</strong> 0.75 (high!)</p>
            <p><strong>Regression:</strong> TSLA = 3.2 √ó SPY + noise</p>
            <p><strong>ADF Test on Spread:</strong> p-value = 0.18 ‚Üí NOT cointegrated ‚ùå</p>
            <p><strong>Why It Fails:</strong> TSLA can permanently decouple from SPY (and has)</p>
            <p><strong>Lesson:</strong> High correlation ‚â† tradable pair</p>
          </div>
        </div>
      </div>

      <div class="section-break"><span>Part 3: Z-Score Entry & Exit Models</span></div>

      <h2 id="trading-the-statistical-anomaly">Trading the Statistical Anomaly</h2>

      <p>Once you've validated cointegration, you need potential entry/potential exit rules. The standard model: <strong>z-score triggers</strong>.</p>

      <p><strong>Z-score measures how many standard deviations the spread is from its mean.</strong></p>

      <p style="font-size:1.1rem;text-align:center;margin:1.5rem 0;background:var(--surface-2);padding:1rem;border-radius:8px">Z-score = (Current Spread - Mean Spread) / Standard Deviation</p>

      <h3 id="standard-potential entrypotential exit-thresholds">Standard Entry/Exit Thresholds</h3>

      <div class="tabs">
        <div class="tabs-nav">
          <button>Conservative (Hedge Funds)</button>
          <button>Aggressive (Prop Firms)</button>
        </div>
        <div class="tabs-content">
          <div class="tab-panel">
            <h3 id="conservative-z-score-model">Conservative Z-Score Model</h3>
            <ul>
              <li><strong>Entry:</strong> |Z| > 2.0 (spread is 2+ std devs from mean)</li>
              <li><strong>Exit:</strong> Z crosses back through 0 (mean reversion)</li>
              <li><strong>Stop Loss:</strong> |Z| > 3.5 (spread widening, cut losses)</li>
            </ul>
            <p style="margin-top:1rem"><strong>Why Conservative:</strong></p>
            <ul>
              <li>Z > 2 means 95% confidence the spread is abnormal</li>
              <li>Fewer false signals, higher win rate</li>
              <li>Lower frequency (fewer trades)</li>
            </ul>
          </div>
          <div class="tab-panel">
            <h3 id="aggressive-z-score-model">Aggressive Z-Score Model</h3>
            <ul>
              <li><strong>Entry:</strong> |Z| > 1.5 (more frequent signals)</li>
              <li><strong>Partial Exit:</strong> Z crosses 0.5 (take some profit)</li>
              <li><strong>Full Exit:</strong> Z crosses 0 (mean)</li>
              <li><strong>Stop Loss:</strong> |Z| > 3.0</li>
            </ul>
            <p style="margin-top:1rem"><strong>Why Aggressive:</strong></p>
            <ul>
              <li>More trades = more opportunities</li>
              <li>Lower threshold = earlier entries</li>
              <li>Requires tighter risk management</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="callout-key">
        <h4>üí° Real-World Application</h4>
        <p><strong>Spread = $5.20</strong><br>
        <strong>Mean Spread = $5.00</strong><br>
        <strong>Std Dev = $0.10</strong></p>
        <p><strong>Z-score = ($5.20 - $5.00) / $0.10 = 2.0</strong></p>
        <p><strong>Action:</strong> Asset A is relatively expensive, Asset B is relatively cheap</p>
        <p><strong>Trade:</strong> Short Asset A, Long Asset B (expect convergence)</p>
      </div>

      <h3 id="half-life-how-long-until-reversion">Half-Life: How Long Until Reversion?</h3>

      <p>The half-life tells you how many periods it takes for the spread to revert halfway back to the mean. This informs your holding period.</p>

      <div class="callout-info">
        <h4>üìñ Calculating Half-Life</h4>
        <p>Use an AR(1) model (autoregressive) on the spread:</p>
        <p style="text-align:center;margin:1rem 0">Spread<sub>t</sub> = Œ∏ √ó Spread<sub>t-1</sub> + Œµ</p>
        <p><strong>Half-Life = -log(2) / log(Œ∏)</strong></p>
        <p><strong>Example:</strong> If Œ∏ = 0.95, Half-Life ‚âà 14 days</p>
        <p><strong>Implication:</strong> Expect mean reversion within ~14 days. If it takes 30+ days, your model may be breaking down.</p>
      </div>

      <div class="section-break"><span>Part 4: Position Sizing & Risk Management</span></div>

      <h2 id="how-much-to-allocate-per-trade">How Much to Allocate Per Trade</h2>

      <p>Statistical arbitrage is NOT "set it and forget it." Spreads can widen before they converge (drawdowns), and some pairs decointegrate over time.</p>

      <h3 id="kelly-criterion-for-stat-arb">Kelly Criterion for Stat Arb</h3>

      <p>Use a modified Kelly approach:</p>

      <p style="font-size:1.1rem;text-align:center;margin:1.5rem 0;background:var(--surface-2);padding:1rem;border-radius:8px">f* = (p √ó b - q) / b</p>

      <p>Where:</p>
      <ul>
        <li><strong>p</strong> = win rate (historical % of profitable mean reversions)</li>
        <li><strong>q</strong> = loss rate (1 - p)</li>
        <li><strong>b</strong> = average win / average loss</li>
        <li><strong>f*</strong> = optimal fraction of capital to risk</li>
      </ul>

      <div class="callout-warning">
        <h4>üö® Never Risk More Than 2-5% Per Pair</h4>
        <p>Even if Kelly suggests 10%, stat arb models can fail (decointegration, regime change). Use half-Kelly or quarter-Kelly for safety:</p>
        <p><strong>Half-Kelly:</strong> f* / 2<br>
        <strong>Quarter-Kelly:</strong> f* / 4</p>
        <p>This protects you from model potential breakdown while still capturing edge.</p>
      </div>

      <h3 id="portfolio-of-pairs-diversification">Portfolio of Pairs: Diversification</h3>

      <p>Don't run just one pair. Build a portfolio of 5-10 cointegrated pairs across different sectors to reduce idiosyncratic risk.</p>

      <div class="accordion">
        <div class="accordion-item">
          <div class="accordion-header">Example Stat Arb Portfolio</div>
          <div class="accordion-content">
            <ul>
              <li><strong>Pair 1:</strong> KO vs PEP (Consumer Staples)</li>
              <li><strong>Pair 2:</strong> XOM vs CVX (Energy)</li>
              <li><strong>Pair 3:</strong> JPM vs BAC (Financials)</li>
              <li><strong>Pair 4:</strong> AAPL vs MSFT (Tech)</li>
              <li><strong>Pair 5:</strong> UNH vs CVS (Healthcare)</li>
            </ul>
            <p style="margin-top:1rem"><strong>Benefit:</strong> If one pair decointegrates, others can still perform</p>
            <p><strong>Risk per Pair:</strong> 2% of capital max</p>
            <p><strong>Total Portfolio Risk:</strong> 10% across 5 uncorrelated pairs</p>
          </div>
        </div>
      </div>

      <div class="section-break"><span>Part 5: When Stat Arb Fails</span></div>

      <h2 id="regime-changes-decointegration">Regime Changes & Decointegration</h2>

      <p>Statistical arbitrage works‚Äîuntil it doesn't. Pairs can <strong>decointegrate</strong> due to:</p>

      <ul>
        <li><strong>Corporate Actions:</strong> Mergers, spinoffs, dividend changes</li>
        <li><strong>Structural Shifts:</strong> One company changes business model</li>
        <li><strong>Macro Regime Change:</strong> Interest rate shocks, sector rotation</li>
        <li><strong>Liquidity Drying Up:</strong> Can't potential exit the position without slippage</li>
      </ul>

      <div class="callout-warning">
        <h4>üö® Real Example: LTCM Collapse (1998)</h4>
        <p>Long-Term Capital Management was a stat arb hedge fund run by Nobel Prize winners. They traded bond spreads with mathematical precision.</p>
        <p><strong>What Went Wrong:</strong> Russian debt crisis caused spreads to widen far beyond historical norms. LTCM kept adding to positions (z-score hit 10+), expecting reversion.</p>
        <p><strong>Result:</strong> $4.6 billion loss. Near collapse of the financial system.</p>
        <p><strong>Lesson:</strong> Statistical models assume normal distributions. Black swan events break those assumptions. Always have stop losses.</p>
      </div>

      
      <div class="callout-info" style="background:rgba(0,212,170,0.1);border-left:4px solid #00d4aa;margin:2rem 0">
        <h4>üü¢ CHECKPOINT (15 minutes)</h4>
        <p>Almost done! You've mastered the complete framework.</p>
        <p style="margin-top:0.5rem;font-size:0.9rem">Final stretch - you're doing great...</p>
      </div>

<h3 id="stop-loss-rules-for-stat-arb">Stop Loss Rules for Stat Arb</h3>

      <ul>
        <li><strong>Z-Score Stop:</strong> Exit if |Z| > 3.5 (spread widening, not reverting)</li>
        <li><strong>Time Stop:</strong> Exit if position is open > 2√ó half-life (model failing)</li>
        <li><strong>Dollar Stop:</strong> Exit if drawdown exceeds 50% of expected profit</li>
        <li><strong>Correlation Breakdown:</strong> Exit if ADF p-value goes above 0.10 (losing cointegration)</li>
      </ul>

      <div class="section-break"><span>Part 6: Practical Implementation</span></div>

      <h2 id="building-your-stat-arb-system">Building Your Stat Arb System</h2>

      <p>Step-by-step process for running statistical arbitrage:</p>

      <div class="accordion">
        <div class="accordion-item">
          <div class="accordion-header">Step 1: Pair Discovery (Screen for Candidates)</div>
          <div class="accordion-content">
            <p><strong>Method:</strong> Screen stocks in the same sector or ETFs tracking similar indices</p>
            <p><strong>Tools:</strong> Python (statsmodels library for ADF test), QuantConnect, or custom scripts</p>
            <p><strong>Criteria:</strong></p>
            <ul>
              <li>Similar market cap (liquidity)</li>
              <li>Same industry/sector (fundamental link)</li>
              <li>High correlation (>0.7) as initial filter</li>
            </ul>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">Step 2: Cointegration Testing</div>
          <div class="accordion-content">
            <p><strong>Run ADF test on the spread:</strong></p>
            <ul>
              <li>Use 6-12 months of daily data</li>
              <li>Calculate spread: Asset A - (Œ≤ √ó Asset B)</li>
              <li>ADF p-value < 0.05 = pass</li>
            </ul>
            <p style="margin-top:1rem"><strong>Reject pairs with p > 0.05</strong> (not cointegrated)</p>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">Step 3: Backtesting</div>
          <div class="accordion-content">
            <p><strong>Test z-score model on historical data:</strong></p>
            <ul>
              <li>Entry at |Z| > 2, potential exit at Z = 0</li>
              <li>Calculate win rate, avg profit/loss, Sharpe ratio</li>
              <li>Verify half-life is reasonable (5-30 days)</li>
            </ul>
            <p style="margin-top:1rem"><strong>If Sharpe > 1.5 and win rate > 60%, proceed to live testing</strong></p>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">Step 4: Live Monitoring</div>
          <div class="accordion-content">
            <p><strong>Track daily:</strong></p>
            <ul>
              <li>Current z-score (potential entry/exit signals)</li>
              <li>Spread volatility (risk sizing)</li>
              <li>Correlation (warning if dropping)</li>
              <li>Re-run ADF test monthly (check for decointegration)</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="callout-tip">
        <h4>üéØ Pro Tip: Use Rolling Windows</h4>
        <p>Don't calculate cointegration once and assume it's stable forever. Use a <strong>rolling 6-month window</strong> to recalculate Œ≤ and re-test ADF every month.</p>
        <p>If p-value drifts above 0.10, potential exit the pair‚Äîit's decointegrating.</p>
      </div>

      <div class="section-break"><span>Part 7: Advanced Strategies‚ÄîIntraday Statistical Arbitrage</span></div>

      <h2 id="high-frequency-mean-reversion-for-active-traders">High-Frequency Mean Reversion (For Active Traders)</h2>

      <p>Most stat arb is swing trading (holding 5-30 days), but cointegration also works on intraday timeframes‚Äîif you have the infrastructure.</p>

      <h3 id="requirements-for-intraday-stat-arb">Requirements for Intraday Stat Arb</h3>

      <ul>
        <li><strong>Low Latency Execution:</strong> Sub-second fills required (DMA or sponsored access)</li>
        <li><strong>High-Liquidity Pairs:</strong> SPY/IWM, QQQ/DIA, sector ETFs only</li>
        <li><strong>Tight Spreads:</strong> Commission + slippage must be <0.02% per trade</li>
        <li><strong>Automated System:</strong> Manual trading too slow for 5-minute half-lives</li>
      </ul>

      <div class="accordion">
        <div class="accordion-item">
          <div class="accordion-header">Example: SPY vs IWM Intraday Pairs</div>
          <div class="accordion-content">
            <p><strong>Pair Logic:</strong></p>
            <ul>
              <li>SPY = S&P 500 (large cap)</li>
              <li>IWM = Russell 2000 (small cap)</li>
              <li>Correlation: 0.92 (5-minute bars)</li>
              <li>ADF test (5-min spread): p = 0.009 ‚úÖ Cointegrated!</li>
              <li>Half-life: 12 bars (60 minutes)</li>
            </ul>
            <p style="margin-top:1rem"><strong>Entry Rules:</strong></p>
            <ul>
              <li>Calculate 5-min rolling z-score</li>
              <li>Entry: |Z| > 1.8 (more aggressive than daily)</li>
              <li>Exit: Z crosses 0 OR 90 minutes elapsed</li>
            </ul>
            <p style="margin-top:1rem"><strong>Example Trade (Nov 15, 2024):</strong></p>
            <ul>
              <li>10:35 AM: SPY at $595.20, IWM at $225.40</li>
              <li>Spread = SPY - (2.642 √ó IWM) = -$0.28</li>
              <li>Z-score = -1.95 (SPY cheap relative to IWM)</li>
              <li><strong>Trade:</strong> Long 200 SPY, Short 530 IWM</li>
            </ul>
            <p style="margin-top:1rem"><strong>Result:</strong></p>
            <ul>
              <li>11:20 AM: Spread reverts to +$0.05</li>
              <li>Z-score = +0.12 (mean reversion complete)</li>
              <li>Exit: Profit $142 in 45 minutes (0.12% return)</li>
            </ul>
            <p style="margin-top:1rem;color:var(--success)"><strong>Scalability:</strong> This trade works 8-12√ó per day with $50-200 profit each. Monthly return: ~3-5% with minimal overnight risk.</p>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">Intraday Stat Arb Risks</div>
          <div class="accordion-content">
            <p><strong>Why Most Retail Traders Fail at This:</strong></p>
            <ul>
              <li><strong>Commission Overhead:</strong> $0.005/share √ó 2 legs √ó multiple trades = eats profits</li>
              <li><strong>Slippage:</strong> Market orders on large size = instant -$50-100 loss</li>
              <li><strong>False Signals:</strong> Intraday noise creates 40-50% false z-score triggers</li>
              <li><strong>Technology Requirements:</strong> Need algo platform (QuantConnect, TradeStation, custom)</li>
            </ul>
            <p style="margin-top:1rem"><strong>Who Should Do This:</strong></p>
            <ul>
              <li>Traders with >$100K capital (need size for profit after costs)</li>
              <li>Access to professional routing (Interactive Brokers Pro, Lightspeed, etc.)</li>
              <li>Automated execution (no manual clicking)</li>
            </ul>
            <p style="margin-top:1rem"><strong>Who Should NOT:</strong></p>
            <ul>
              <li>Beginner traders (stick to daily/weekly stat arb)</li>
              <li>Anyone using Robinhood, Webull, etc. (too much slippage)</li>
              <li>Manual traders (you'll miss fills and get chopped up)</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="section-break"><span>Part 8: Portfolio Construction for Stat Arb</span></div>

      <h2 id="building-a-diversified-stat-arb-book">Building a Diversified Stat Arb Book</h2>

      <p>Single-pair trading is risky (decointegration can wipe you out). Professional stat arb traders run portfolios of 10-30 pairs simultaneously.</p>

      <h3 id="example-portfolio-allocation">Example Portfolio Allocation</h3>

      <div class="tabs">
        <div class="tabs-nav">
          <button>Conservative</button>
          <button>Moderate</button>
          <button>Aggressive</button>
        </div>
        <div class="tabs-content">
          <div class="tab-panel">
            <h3 id="conservative-stat-arb-portfolio-100k-account">Conservative Stat Arb Portfolio ($100K Account)</h3>
            <p><strong>Strategy:</strong> 5 pairs, 2% risk each, daily timeframe</p>
            <ul>
              <li><strong>Pair 1:</strong> KO/PEP (Consumer Staples) ‚Äî 2% allocation</li>
              <li><strong>Pair 2:</strong> JPM/BAC (Financials) ‚Äî 2% allocation</li>
              <li><strong>Pair 3:</strong> XOM/CVX (Energy) ‚Äî 2% allocation</li>
              <li><strong>Pair 4:</strong> UNH/CVS (Healthcare) ‚Äî 2% allocation</li>
              <li><strong>Pair 5:</strong> WMT/TGT (Retail) ‚Äî 2% allocation</li>
            </ul>
            <p style="margin-top:1rem"><strong>Total Risk:</strong> 10% of capital actively deployed</p>
            <p><strong>Expected Sharpe:</strong> 1.5-2.0</p>
            <p><strong>Expected Annual Return:</strong> 12-18%</p>
            <p><strong>Max Drawdown:</strong> -8% to -12%</p>
          </div>
          <div class="tab-panel">
            <h3 id="moderate-stat-arb-portfolio-100k-account">Moderate Stat Arb Portfolio ($100K Account)</h3>
            <p><strong>Strategy:</strong> 10 pairs, 1.5% risk each, mix of daily and intraday</p>
            <ul>
              <li><strong>Daily Pairs (6):</strong> Same as conservative, plus MA/V, DIS/CMCSA</li>
              <li><strong>Intraday Pairs (4):</strong> SPY/IWM, QQQ/DIA, XLF/XLK, XLE/XLU</li>
            </ul>
            <p style="margin-top:1rem"><strong>Total Risk:</strong> 15% of capital</p>
            <p><strong>Expected Sharpe:</strong> 2.0-2.5</p>
            <p><strong>Expected Annual Return:</strong> 20-30%</p>
            <p><strong>Max Drawdown:</strong> -12% to -18%</p>
          </div>
          <div class="tab-panel">
            <h3 id="aggressive-stat-arb-portfolio-100k-account">Aggressive Stat Arb Portfolio ($100K Account)</h3>
            <p><strong>Strategy:</strong> 20+ pairs, 1% risk each, heavy intraday focus</p>
            <ul>
              <li><strong>Daily Pairs (8):</strong> High Sharpe blue-chips</li>
              <li><strong>Intraday Pairs (12):</strong> ETF pairs with tight spreads</li>
              <li><strong>Leverage:</strong> 1.5√ó (using portfolio margin)</li>
            </ul>
            <p style="margin-top:1rem"><strong>Total Risk:</strong> 20% of capital (30% with leverage)</p>
            <p><strong>Expected Sharpe:</strong> 2.5-3.5 (if executed properly)</p>
            <p><strong>Expected Annual Return:</strong> 35-50%</p>
            <p><strong>Max Drawdown:</strong> -20% to -30%</p>
            <p style="margin-top:1rem;color:var(--warning)"><strong>Warning:</strong> Requires full-time monitoring, professional execution, and risk management discipline</p>
          </div>
        </div>
      </div>

      <div class="callout-warning">
        <h4>üö® Correlation Between Pairs (Hidden Risk)</h4>
        <p>Don't just diversify by adding more pairs. Check if your pairs are correlated with EACH OTHER:</p>
        <p><strong>Bad Portfolio:</strong></p>
        <ul>
          <li>KO/PEP, MDLZ/GIS, K/CPB (all food companies)</li>
          <li>If consumer staples sector crashes, ALL pairs move together</li>
          <li>Your 10 pairs = 1 bet (sector bet, not stat arb)</li>
        </ul>
        <p style="margin-top:1rem"><strong>Good Portfolio:</strong></p>
        <ul>
          <li>KO/PEP (consumer), JPM/BAC (finance), XOM/CVX (energy)</li>
          <li>Sector diversification = uncorrelated pair performance</li>
          <li>One sector crash doesn't kill entire portfolio</li>
        </ul>
      </div>

      <h3 id="rebalancing-your-stat-arb-portfolio">Rebalancing Your Stat Arb Portfolio</h3>

      <div class="callout-info">
        <h4>üìñ Monthly Maintenance Checklist</h4>
        <p><strong>1st of Every Month:</strong></p>
        <ul>
          <li>Re-run ADF tests on ALL pairs (check for decointegration)</li>
          <li>Recalculate hedge ratios (Œ≤ may drift over time)</li>
          <li>Update z-score thresholds based on new volatility</li>
          <li>Remove pairs with p-value > 0.10 (losing cointegration)</li>
          <li>Add new pairs that pass screening criteria</li>
        </ul>
        <p style="margin-top:1rem"><strong>Example Decointegration Detection:</strong></p>
        <ul>
          <li>January: KO/PEP ADF p-value = 0.021 ‚úÖ</li>
          <li>February: p-value = 0.046 ‚úÖ (still good)</li>
          <li>March: p-value = 0.089 ‚ö†Ô∏è (warning)</li>
          <li>April: p-value = 0.124 ‚ùå (REMOVE from portfolio)</li>
        </ul>
        <p style="margin-top:1rem"><strong>Action:</strong> Close any open KO/PEP positions, find replacement pair</p>
      </div>

      <div class="section-break"><span>Part 9: Code Implementation (Python Example)</span></div>

      <h2 id="building-your-stat-arb-system-from-scratch">Building Your Stat Arb System from Scratch</h2>

      <p>Here's a practical Python implementation for testing and trading pairs:</p>

      <div class="accordion">
        <div class="accordion-item">
          <div class="accordion-header">Step 1: Testing for Cointegration</div>
          <div class="accordion-content">
            <pre><code>import pandas as pd
import numpy as np
from statsmodels.tsa.stattools import adfuller
from statsmodels.api import OLS

# Example: Test KO vs PEP cointegration
ko = pd.read_csv('KO_daily.csv')['Close']
pep = pd.read_csv('PEP_daily.csv')['Close']

# Calculate hedge ratio using OLS regression
model = OLS(ko, pep).fit()
beta = model.params[0]
print(f"Hedge Ratio (Œ≤): {beta:.4f}")

# Calculate spread
spread = ko - (beta * pep)

# Run ADF test on spread
adf_result = adfuller(spread)
p_value = adf_result[1]

if p_value < 0.05:
    print(f"‚úÖ COINTEGRATED! (p-value: {p_value:.4f})")
else:
    print(f"‚ùå NOT cointegrated (p-value: {p_value:.4f})")

# Calculate half-life
def calculate_half_life(spread):
    spread_lag = spread.shift(1)
    spread_diff = spread - spread_lag
    model = OLS(spread_diff[1:], spread_lag[1:]).fit()
    theta = model.params[0]
    half_life = -np.log(2) / np.log(1 + theta)
    return half_life

half_life = calculate_half_life(spread)
print(f"Half-Life: {half_life:.1f} days")
</code></pre>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">Step 2: Calculating Z-Score Signals</div>
          <div class="accordion-content">
            <pre><code># Calculate rolling z-score
lookback = 60  # 60-day rolling window

spread_mean = spread.rolling(window=lookback).mean()
spread_std = spread.rolling(window=lookback).std()
z_score = (spread - spread_mean) / spread_std

# Entry/exit signals
potential entry_threshold = 2.0
potential exit_threshold = 0.0
stop_threshold = 3.5

# Long spread signal (buy asset A, sell asset B)
long_potential entry = z_score < -potential entry_threshold
long_potential exit = z_score > -potential exit_threshold

# Short spread signal (sell asset A, buy asset B)
short_potential entry = z_score > potential entry_threshold
short_potential exit = z_score < potential exit_threshold

# Stop loss
stop_loss = (z_score > stop_threshold) | (z_score < -stop_threshold)

print(f"Current Z-Score: {z_score.iloc[-1]:.2f}")
if z_score.iloc[-1] > potential entry_threshold:
    print("üî¥ SHORT SPREAD (sell KO, buy PEP)")
elif z_score.iloc[-1] < -potential entry_threshold:
    print("üü¢ LONG SPREAD (buy KO, sell PEP)")
else:
    print("‚ö™ NO TRADE (waiting for signal)")
</code></pre>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">Step 3: Backtesting the Strategy</div>
          <div class="accordion-content">
            <pre><code># Simple backtest
position = 0  # 0 = no position, 1 = long spread, -1 = short spread
trades = []
pnl = []

for i in range(lookback, len(z_score)):
    z = z_score.iloc[i]

    # Entry logic
    if position == 0:
        if z < -potential entry_threshold:
            position = 1  # Long spread
            potential entry_price = spread.iloc[i]
        elif z > potential entry_threshold:
            position = -1  # Short spread
            potential entry_price = spread.iloc[i]

    # Exit logic
    elif position == 1:  # In long spread
        if z > -potential exit_threshold or z < -stop_threshold:
            potential exit_price = spread.iloc[i]
            profit = potential exit_price - potential entry_price
            trades.append(profit)
            position = 0

    elif position == -1:  # In short spread
        if z < potential exit_threshold or z > stop_threshold:
            potential exit_price = spread.iloc[i]
            profit = potential entry_price - potential exit_price
            trades.append(profit)
            position = 0

# Calculate statistics
win_rate = len([t for t in trades if t > 0]) / len(trades)
avg_win = np.mean([t for t in trades if t > 0])
avg_loss = np.mean([t for t in trades if t < 0])
profit_factor = abs(sum([t for t in trades if t > 0])) / abs(sum([t for t in trades if t < 0]))

print(f"Total Trades: {len(trades)}")
print(f"Win Rate: {win_rate:.1%}")
print(f"Avg Win: ${avg_win:.2f}")
print(f"Avg Loss: ${avg_loss:.2f}")
print(f"Profit Factor: {profit_factor:.2f}")
print(f"Total PnL: ${sum(trades):.2f}")
</code></pre>
          </div>
        </div>
      </div>

      <div class="callout-tip">
        <h4>üéØ Pro Tips for Live Trading</h4>
        <ul>
          <li><strong>Paper Trade First:</strong> Run your system for 1-3 months with fake money before risking capital</li>
          <li><strong>Start Small:</strong> 0.5-1% position sizes until you've proven your edge</li>
          <li><strong>Monitor Slippage:</strong> If your fills are >0.05% worse than backtest, reduce size or improve execution</li>
          <li><strong>Track Every Trade:</strong> Log potential entry z-score, potential exit z-score, hold time, P&L‚Äîanalyze what works</li>
        </ul>
      </div>

      <div class="section-break"><span>Key Takeaways</span></div>

      <div class="callout-key">
        <h4>üí° Statistical Arbitrage Checklist</h4>
        <ul>
          <li><strong>Cointegration > Correlation:</strong> Always validate with ADF test (p < 0.05)</li>
          <li><strong>Z-Score Entry:</strong> |Z| > 2.0 for conservative, > 1.5 for aggressive</li>
          <li><strong>Stop Losses:</strong> Exit if |Z| > 3.5 or position open > 2√ó half-life</li>
          <li><strong>Position Sizing:</strong> Never more than 2-5% per pair (use Kelly/half-Kelly)</li>
          <li><strong>Diversify Pairs:</strong> Run 5-10 pairs across different sectors</li>
          <li><strong>Monitor Continuously:</strong> Re-test cointegration monthly, potential exit if breaking down</li>
          <li><strong>Portfolio Construction:</strong> Ensure pairs are uncorrelated with each other (sector diversity)</li>
          <li><strong>Intraday Trading:</strong> Only with professional execution and automation</li>
        </ul>
      </div>

      <h2 id="next-steps">Next Steps</h2>

      <p>Statistical arbitrage is a quantitative edge‚Äîbut it requires discipline. If you execute this correctly, you're trading with mathematical precision instead of hope.</p>

      <p><strong>Ready to go deeper?</strong> Continue to <a href="/curriculum/advanced-mastery/64-macro-regime-framework.html">Lesson #64: Macro Regime Framework</a> to understand how regime changes affect your stat arb models.</p>

    </div>

    <!-- Sidebar (Navigation + Tools) -->
    <aside class="article-sidebar">
      <!-- Lesson Navigation -->
      <nav class="nav-article" aria-label="Lesson Navigation">
        <div class="nav-item prev">
          <a href="/curriculum/advanced/62-trading-career-path.html">
            <span class="nav-label">‚Üê Previous</span>
            <span class="nav-title">Trading Career Path</span>
          </a>
        </div>
        <div class="nav-item next">
          <a href="/curriculum/advanced-mastery/64-macro-regime-framework.html">
            <span class="nav-label">Next ‚Üí</span>
            <span class="nav-title">Macro Regime Framework</span>
          </a>
        </div>
      </nav>

      <!-- Action Buttons -->
      <div class="lesson-actions">
        <button id="mark-complete" class="btn btn-primary w-full">‚úì Mark as Complete</button>
        <button id="bookmark-btn" class="btn btn-ghost w-full">üîñ Bookmark</button>
        <button id="notes-toggle" class="btn btn-ghost w-full">üìù My Notes</button>
      </div>

      <!-- Related Lessons -->
      <div class="card">
        <h3 style="margin:0 0 1rem 0;font-size:1rem" id="-related-lessons">üìö Related Lessons</h3>
        <ul style="list-style:none;padding:0;margin:0">
          <li style="margin-bottom:.75rem">
            <a href="/curriculum/advanced-mastery/64-macro-regime-framework.html" style="color:var(--primary);text-decoration:none">
              #64: Macro Regime Framework
            </a>
          </li>
          <li style="margin-bottom:.75rem">
            <a href="/curriculum/advanced-mastery/66-quantitative-strategy-design.html" style="color:var(--primary);text-decoration:none">
              #66: Quantitative Strategy Design
            </a>
          </li>
          <li>
            <a href="/curriculum/advanced-mastery/67-machine-learning-trading.html" style="color:var(--primary);text-decoration:none">
              #67: Machine Learning in Trading
            </a>
          </li>
        </ul>
      </div>
    </aside>
  </div>


  <div class="wrap nav-article">
    <a class="btn btn-ghost" href="/advanced-mastery.html">&larr; Back to Advanced Mastery</a>
  </div>
</article>

<aside class="toc" aria-label="On this page">
  <h3 id="on-this-page">On this page</h3>
      <a href="#the-most-dangerous-misconception-in-pairs-trading">The Most Dangerous Misconception in Pairs Trading</a>
      <a href="#case-study-when-you-trade-correlation-instead-of-cointegration">The Augmented Dickey-Fuller Test</a>
      <a href="#the-augmented-dickey-fuller-test">Trading the Statistical Anomaly</a>
      <a href="#trading-the-statistical-anomaly">How Much to Allocate Per Trade</a>
      <a href="#how-much-to-allocate-per-trade">Regime Changes & Decointegration</a>
      <a href="#regime-changes-decointegration">Building Your Stat Arb System</a>
      <a href="#building-your-stat-arb-system">Next Steps</a>
</aside>

<footer class="sp-footer"><div class="wrap"><div>¬© <span id="year"></span> Signal Pilot Labs, Inc.</div><div class="links"><a href="https://signalpilot.io/privacy.html">Privacy</a><a href="https://signalpilot.io/terms.html">Terms</a></div></div></footer>

<script src="/assets/edu.js"></script>
<script src="/assets/edu-enhanced.js"></script>
<script src="/assets/sp-bg.js"></script>
<script>
document.getElementById('year').textContent = new Date().getFullYear();
</script>
<!-- SignalPilot Theme Switcher -->
<script src="/assets/signalpilot-theme.js"></script>
<script src="/assets/spaced-repetition.js" defer></script>
<script src="/assets/chatbot.js" defer></script>
<script src="/assets/notes.js" defer></script>
<script src="/assets/analytics.js"></script>
<script src="/assets/quiz-enhanced.js"></script>
<script src="/assets/social-share.js"></script>
<script src="/assets/pwa-init.js"></script>
<script src="/assets/config.js"></script>
<script src="/assets/supabase-client.js"></script>
<script src="/assets/auth-ui.js"></script>
<script src="/assets/library.js"></script>
<script src="/assets/lesson-notes.js"></script>
</body>
</html>