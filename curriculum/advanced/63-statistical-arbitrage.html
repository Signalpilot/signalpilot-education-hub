<!doctype html>
<html lang="en" dir="ltr" data-theme="dark">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-440EJBMYST"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-440EJBMYST');
  gtag('config', 'AW-17835897996');
</script>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/icon-180x180.png">
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5, viewport-fit=cover"/>
  <meta name="robots" content="index,follow"/>
  <!-- AGGRESSIVE CACHE PREVENTION -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0"/>
  <meta http-equiv="Pragma" content="no-cache"/>
  <meta http-equiv="Expires" content="0"/>
  <title>Statistical Arbitrage: Quantitative Mean Reversion ‚Äî Signal Pilot Education</title>
  <meta name="description" content="Statistical Arbitrage: Quantitative Mean Reversion">
  <meta name="sp-level" content="Advanced"><meta name="sp-order" content="63">
  <link rel="canonical" href="https://education.signalpilot.io/curriculum/advanced/63-statistical-arbitrage.html">
  <link rel="prev" href="https://education.signalpilot.io/curriculum/advanced/62-trading-career-path.html"/>
  <link rel="next" href="https://education.signalpilot.io/curriculum/advanced/64-macro-regime-framework.html"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Gugi&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
  <!-- SignalPilot Theme System -->
  <link rel="stylesheet" href="/assets/signalpilot-theme.css">
  <link rel="stylesheet" href="/assets/edu.css">
  <link rel="stylesheet" href="/assets/chatbot.css">
  <link rel="stylesheet" href="/assets/lang-switcher.css">
  <link rel="stylesheet" href="/assets/notes.css">
  <link rel="stylesheet" href="/assets/auth-ui.css">
  <link rel="stylesheet" href="/assets/trial-cta.css">
  <link rel="stylesheet" href="/assets/blog-links.css">
  <link rel="stylesheet" href="/assets/discussions.css">
  <!-- Logger must load first -->
  <script src="/assets/logger.js"></script>
  <script src="/assets/dev-utils.js" defer></script>
  <script src="/assets/structured-data.js" defer></script>
  <script src="/assets/lazy-load.js" defer></script>
  <script defer data-domain="signalpilot.io" src="https://plausible.io/js/script.js"></script>
</head>
<body class="table-accordions-mobile">
  <div class="bg-stars" aria-hidden="true"></div>
  <canvas id="constellations" class="sp-constellations" aria-hidden="true"></canvas>
  <div class="bg-aurora" aria-hidden="true"></div>

<header class="sp-header">
  <div class="wrap">
    <a href="https://signalpilot.io" class="brand">
      <span>Signal Pilot</span>
    </a>
    <nav id="mainnav" aria-label="Main"><ul>
      <li><a href="/">Education</a></li>
      <li><a href="/search.html">Search</a></li>
      <li><a href="/my-library.html">My Library</a></li>
      <li><a href="https://blog.signalpilot.io" target="_blank" rel="noopener">Blog</a></li>
    </ul></nav>
    <div class="header-ctls">
      <div id="google_translate_element"></div><button id="themeToggle" class="btn btn-ghost btn-sm" type="button" aria-label="Toggle theme">
        <span id="theme-icon">‚òΩ</span>
      </button><button id="menuToggle" class="menu-toggle" aria-expanded="false"><span class="menu-toggle-text">Menu </span>‚ò∞</button></div>
  </div>
</header>

<article class="article">

  <!-- Article Header -->
  <header>
    <div class="wrap">
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="/">Home</a> <span>‚Ä∫</span>
        <a href="/advanced.html">Advanced</a> <span>‚Ä∫</span>
        <span>Lesson #63</span>
      </nav>
      <span class="badge">üî¥ Advanced ‚Ä¢ Lesson 63 of 82</span>
      <h1 class="headline xl">Statistical Arbitrage: Quantitative Mean Reversion</h1>
      <div class="meta">Reading time ~18-22 min ‚Ä¢ Pairs Trading & Cointegration Analysis</div>

      <!-- Article Progress Indicator -->
      <div class="article-progress" style="--progress:0%">
        <div class="progress-circle"><span>0%</span></div>
        <div class="progress-text">
          <strong>You're making progress!</strong>
          <div style="font-size:.85rem;color:var(--muted)">Keep reading to mark this lesson complete</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="wrap article-grid">
    <div class="prose">

      <p><b>Two assets walk into a bar. They're historically correlated‚Äîwhen one goes up, the other usually follows. Today? One rallies 5% while the other drops 3%.</b></p>

      <p>Do you panic? Short the strong one? Buy the weak one?</p>

      <p>Or do you recognize this as statistical arbitrage gold‚Äîa temporary divergence from long-term equilibrium that will eventually revert. If the relationship is <em>cointegrated</em> (not just correlated), you can trade the spread with quantified edge.</p>

      <div class="callout-warning">
        <h4>üö® This Isn't "Buy Dips" Hope Trading</h4>
        <p>Statistical arbitrage requires rigorous mathematical validation. You can't just eyeball two charts and assume they'll converge. You need cointegration tests, z-score models, and proper risk management‚Äîbecause spreads can diverge further before they converge.</p>
        <p><strong>Without quantitative validation?</strong> You're gambling, not arbitraging.</p>
      </div>

      <div class="callout-tip">
        <h4>üéØ What You'll Master</h4>
        <p>By the end of this lesson, you'll understand:</p>
        <ul>
          <li>The difference between correlation and cointegration (critical!)</li>
          <li>How to identify viable pairs using Augmented Dickey-Fuller tests</li>
          <li>Z-score potential entry/potential exit models for statistical edge</li>
          <li>Position sizing based on spread volatility and half-life</li>
          <li>Real-world stat arb strategies used by hedge funds</li>
        </ul>
      </div>

      <details style="background:rgba(0,212,170,0.08);padding:1.5rem;border-radius:8px;margin:2rem 0;border-left:4px solid #00d4aa">
        <summary style="cursor:pointer;font-weight:600;font-size:1.1rem">‚ö° Quick Wins for Tomorrow (Click to expand)</summary>
        <div style="margin-top:1rem">
          <ol style="margin:0.75rem 0 0 1.5rem;line-height:1.8">
            <li><strong>Test Your First Pair for Cointegration Tonight</strong> ‚Äî Use Python: `from statsmodels.tsa.stattools import coint; score, pvalue, _ = coint(spy, qqq)`. If p-value < 0.05 = cointegrated (tradeable). If > 0.05 = NOT cointegrated (don't trade). High correlation ‚â† cointegration.</li>
            <li><strong>Build Your Z-Score Spreadsheet</strong> ‚Äî Z = (Current Spread - Avg Spread) / StdDev. Entry: |z| > 2.0 (2 standard deviations from mean). Exit: z returns to 0. Stop: |z| > 3.0 (diverging too far). Position size: 2% per pair.</li>
            <li><strong>Paper Trade ONE Pair for 30 Days</strong> ‚Äî Pick one cointegrated pair (SPY-IWM, KO-PEP). Enter at z ‚â• 2.0, exit at z ‚â§ 0.5. Track 10-15 trades. Target: >65% win rate, >1.5% avg profit. Validate execution before live money.</li>
          </ol>
        </div>
      </details>

      <div class="section-break"><span>Part 1: Why Correlation ‚â† Cointegration</span></div>

<h2 id="the-most-dangerous-misconception-in-pairs-trading">The Most Dangerous Misconception in Pairs Trading</h2>

      <p>Retail traders love to find "correlated pairs" and trade the divergence. SPY and QQQ move together, right? Tesla and Lucid? Bitcoin and Ethereum?</p>

      <p>Here's the trap: <strong>Correlation does not guarantee mean reversion</strong>.</p>

      <p>Two assets can be highly correlated yet drift apart permanently. Why? Because correlation measures <em>direction</em>, not <em>equilibrium</em>.</p>

      <div class="tabs">
        <div class="tabs-nav">
          <button>Correlation (Dangerous)</button>
          <button>Cointegration (Required)</button>
        </div>
        <div class="tabs-content">
          <div class="tab-panel">
            <h3 id="correlation-moves-together-maybe">Correlation: Moves Together, Maybe</h3>
            <p><strong>Definition:</strong> Measures how two assets move in the same direction</p>
            <p><strong>Range:</strong> -1 (perfect inverse) to +1 (perfect positive)</p>
            <p><strong>The Problem:</strong> High correlation doesn't mean they'll return to any specific relationship. Example:</p>
            <ul>
              <li>Stock A: $100 ‚Üí $150 (+50%)</li>
              <li>Stock B: $50 ‚Üí $75 (+50%)</li>
              <li><strong>Correlation:</strong> Perfect 1.0</li>
              <li><strong>Spread:</strong> $50 throughout (no reversion)</li>
            </ul>
            <p style="margin-top:1rem;color:var(--warning)"><strong>Danger:</strong> You can't trade a spread that doesn't revert. This is why pure correlation-based pairs fail.</p>
          </div>
          <div class="tab-panel">
            <h3 id="cointegration-mean-reverting-equilibrium">Cointegration: Mean-Reverting Equilibrium</h3>
            <p><strong>Definition:</strong> A statistically stable long-term relationship where deviations are temporary</p>
            <p><strong>Test:</strong> Augmented Dickey-Fuller (ADF) test on the spread</p>
            <p><strong>What It Means:</strong> When the spread deviates, it's pulled back toward equilibrium. Example:</p>
            <ul>
              <li>Asset A / Asset B = typical ratio of 2.0</li>
              <li>Today: ratio = 2.4 (spread widened)</li>
              <li><strong>Cointegrated pairs:</strong> Ratio reverts toward 2.0</li>
              <li><strong>Edge:</strong> Sell the expensive one, buy the cheap one</li>
            </ul>
            <p style="margin-top:1rem;color:var(--success)"><strong>This Works:</strong> Mean reversion is statistically validated, not hoped for.</p>
          </div>
        </div>
      </div>

      <div class="callout-key">
        <h4>üí° The Key Insight</h4>
        <p>Correlation = "They move together"<br>
        Cointegration = "Their relationship has gravity"</p>
        <p>Only cointegrated pairs can be traded as statistical arbitrage. Everything else is speculation.</p>
      </div>

      <div class="section-break"><span>Part 1.5: The $31,400 Lesson‚ÄîDerek's Correlation Trap</span></div>

<h2 id="dereks-31400-correlation-trap">Derek's $31,400 Correlation Trap: When Correlated Pairs Don't Revert</h2>

      <p><strong>Derek Martinez, 34, Austin, TX</strong> ‚Äî Quantitative trader, $220K account.</p>

      <p><strong>February 2024:</strong> Derek pairs traded ARKK/QQQ based on 0.89 correlation. "When they diverge, they'll converge back." He never tested for cointegration.</p>

      <p><strong>By May 2024:</strong> 3 trades over 3 months. Total loss: <strong>-$31,400</strong> (-14.3%).</p>

      <div class="callout-warning">
        <h4>üö® What Derek Learned The Hard Way</h4>
        <p>"Correlation measures the PAST. Cointegration predicts the FUTURE. I lost $31,400 trading ARKK/QQQ because they were 'highly correlated.' But correlation just means they moved similarly historically. It doesn't mean they'll revert."</p>
        <p style="margin-top:0.75rem"><em>‚Äî Derek Martinez, May 2024</em></p>
      </div>

      <div class="story-summary">
        <h3>üìâ Derek's 3-Month Disaster: Feb-May 2024</h3>

        <div class="summary-stats">
          <div class="stat-box">
            <span class="stat-label">Total Trades</span>
            <span class="stat-value">3</span>
          </div>
          <div class="stat-box">
            <span class="stat-label">Win Rate</span>
            <span class="stat-value loss">0%</span>
          </div>
          <div class="stat-box">
            <span class="stat-label">Total Loss</span>
            <span class="stat-value loss">-$31,400</span>
          </div>
        </div>

        <div class="key-insight">
          <strong>Fatal Mistakes:</strong> No ADF test (spread wasn't stationary), no half-life calculation (held 25+ days with no statistical basis), ignored structural changes (ARKK pivoted to biotech).
        </div>
      </div>

      <h3 id="the-three-disasters">The Three Disasters</h3>

      <p><strong>Trade #1 (Feb 12-Mar 8):</strong> Bought ARKK thinking "cheap vs QQQ." Spread widened instead of reverting. Loss: <strong>-$6,600</strong>.</p>

      <p><strong>Trade #2 (Mar 15-Apr 19):</strong> Shorted ARKK "overextended." ARKK exploded +13.5% on genomics hype. Margin call. Loss: <strong>-$15,200</strong>.</p>

      <p><strong>Trade #3 (Apr 25-May 10):</strong> Revenge trade. Initially up $26,831, then short squeezed +10.5%. Held hoping for recovery. Loss: <strong>-$8,400</strong>.</p>

      <h3 id="the-rebuild-feb-nov-2025">The Rebuild: February-November 2025</h3>

      <p><strong>New Process:</strong></p>
      <ol>
        <li><strong>ADF test EVERY pair</strong> ‚Äî p-value must be &lt;0.05 for stationary spread</li>
        <li><strong>Calculate half-life</strong> ‚Äî Only trade if mean reversion &lt;20 days</li>
        <li><strong>Z-score entry</strong> ‚Äî |Z| &gt; 2.0 (2+ std devs from mean)</li>
        <li><strong>Decointegration stop</strong> ‚Äî If ADF p-value rises &gt;0.10, exit immediately</li>
      </ol>

      <p><strong>Pairs traded:</strong> KO/PEP, XOM/CVX, JPM/BAC (all tested cointegrated).</p>

      <div class="story-summary">
        <h3>üìà Derek's 9-Month Transformation</h3>
        <div class="summary-stats">
          <div class="stat-box">
            <span class="stat-label">Win Rate</span>
            <span class="stat-value win">0% ‚Üí 69.6%</span>
          </div>
          <div class="stat-box">
            <span class="stat-label">Profit Factor</span>
            <span class="stat-value win">3.2</span>
          </div>
          <div class="stat-box">
            <span class="stat-label">Recovery</span>
            <span class="stat-value win">+$23,094</span>
          </div>
        </div>
        <div class="key-insight">
          <strong>The Transformation:</strong> Account: $188.6K ‚Üí $211.7K (+12.2%). Sharpe 1.94. Only trades pairs where ADF p-value &lt;0.05. Best trade: +$4,120 JPM/BAC (z-score 2.8 entry).
        </div>
      </div>

      <div class="callout-key">
        <h4>üí° Derek's Lesson</h4>
        <p>Correlation = "They move together." Cointegration = "Their relationship has gravity."</p>
        <ul style="margin:0.75rem 0">
          <li><strong>ADF p-value &lt;0.05</strong> = spread is stationary, can trade</li>
          <li><strong>ADF p-value &gt;0.05</strong> = NOT cointegrated, don't touch it</li>
          <li>Calculate <strong>half-life</strong> to know how long reversion takes</li>
        </ul>
        <p style="margin-top:1rem;font-weight:600;color:#00d4aa">Win rate went from 0% to 69.6% by testing for cointegration, not just correlation.</p>
      </div>

<div class="quiz-question" style="margin-top:2rem">
  <p><strong>Case Study Quiz: Derek lost $31,400 (-14.3%) in 3 months trading ARKK/QQQ pairs. He was confident because they showed 0.89 correlation‚Äîthey moved together historically. Trade #2 destroyed him: he shorted ARKK thinking it was "overextended vs. QQQ," but ARKK exploded +13.5% while QQQ only +1.1%, causing a margin call and -$15,200 loss. He also missed a $26,831 profit opportunity when the spread reversed but he held too long. What was Derek's fatal mistake?</strong></p>
  <div class="quiz-options">
    <div class="quiz-option" data-correct="false">
      <strong>A)</strong> He used too much leverage on the pairs trade, causing margin calls when spreads widened temporarily
    </div>
    <div class="quiz-option" data-correct="false">
      <strong>B)</strong> He held positions too short (under 10 days), not giving mean reversion enough time to occur
    </div>
    <div class="quiz-option" data-correct="true">
      <strong>C)</strong> He NEVER tested for cointegration‚Äîconfused correlation (0.89 = past similarity) with cointegration (mean-reverting spread). Never ran ADF test (p-value), never calculated half-life. The spread was NOT stationary, so reversion never came
    </div>
    <div class="quiz-option" data-correct="false">
      <strong>D)</strong> He entered at wrong z-scores (z=1.0 instead of z=2.0), so trades lacked statistical edge
    </div>
  </div>
  <div class="quiz-explanation">
    <p><strong>Correct: C.</strong> Derek confused correlation (past similarity) with cointegration (mean-reverting spread). He never ran an ADF test. ARKK pivoted to biotech, breaking the historical link with QQQ‚Äîcorrelation persisted but cointegration died. Recovery: ADF test every pair (p<0.05), calculate half-life, use z-score entry. Result: 69.6% win rate after learning proper stat arb.</p>
  </div>
</div>

      <div class="section-break"><span>Part 2: Testing for Cointegration‚ÄîThe Augmented Dickey-Fuller Test</span></div>

<h2 id="the-augmented-dickey-fuller-test">The Augmented Dickey-Fuller Test</h2>

      <p>To validate cointegration, you need to test whether the spread (or ratio) is <strong>stationary</strong>‚Äîmeaning it has a constant mean it reverts to.</p>

      <p>The standard test: <strong>Augmented Dickey-Fuller (ADF) test</strong>.</p>

      <div class="callout-info" style="background:rgba(118,221,255,0.08);padding:1.5rem;border-radius:8px;margin:2rem 0;border-left:4px solid var(--accent)">
        <h4>üìê What the ADF Test Does</h4>
        <p>The ADF test checks if a time series (like the spread between two assets) is <strong>stationary</strong> or has a <strong>unit root</strong> (random walk, non-stationary).</p>
        <ul style="margin:0.5rem 0 0 1.5rem;line-height:1.8">
          <li><strong>Stationary spread:</strong> Has a constant mean and variance. Deviations from the mean are temporary ‚Üí mean reversion is expected.</li>
          <li><strong>Non-stationary spread:</strong> Drifts over time with no equilibrium. Deviations can persist indefinitely ‚Üí no reliable mean reversion.</li>
        </ul>
        <p style="margin-top:1rem"><strong>Null Hypothesis (H‚ÇÄ):</strong> The spread has a unit root (NOT stationary, NOT cointegrated)</p>
        <p><strong>Alternative Hypothesis (H‚ÇÅ):</strong> The spread is stationary (cointegrated, mean-reverting)</p>
      </div>

      <h3 id="interpreting-adf-test-results">Interpreting ADF Test Results</h3>

      <p>The ADF test outputs a <strong>p-value</strong> that tells you the probability that the spread is non-stationary (random walk).</p>

      <div style="overflow-x:auto;margin:1.5rem 0">
      <table style="width:100%;border-collapse:collapse">
        <thead>
          <tr style="background:rgba(255,255,255,0.03)">
            <th style="padding:0.75rem;text-align:left">P-Value</th>
            <th style="padding:0.75rem;text-align:left">Interpretation</th>
            <th style="padding:0.75rem;text-align:left">Trade Decision</th>
          </tr>
        </thead>
        <tbody>
          <tr style="background:rgba(34,197,94,0.08)">
            <td style="padding:0.75rem"><strong>&lt; 0.01</strong></td>
            <td style="padding:0.75rem">Highly stationary (99% confidence)</td>
            <td style="padding:0.75rem;font-weight:600;color:#22c55e">‚úÖ TRADEABLE (strong cointegration)</td>
          </tr>
          <tr style="background:rgba(34,197,94,0.12)">
            <td style="padding:0.75rem"><strong>0.01 - 0.05</strong></td>
            <td style="padding:0.75rem">Stationary (95% confidence)</td>
            <td style="padding:0.75rem;font-weight:600;color:#22c55e">‚úÖ TRADEABLE (acceptable cointegration)</td>
          </tr>
          <tr style="background:rgba(255,193,7,0.08)">
            <td style="padding:0.75rem"><strong>0.05 - 0.10</strong></td>
            <td style="padding:0.75rem">Weakly stationary (90% confidence)</td>
            <td style="padding:0.75rem;font-weight:600;color:#ffc107">‚ö†Ô∏è MARGINAL (risky, watch closely)</td>
          </tr>
          <tr style="background:rgba(239,68,68,0.08)">
            <td style="padding:0.75rem"><strong>&gt; 0.10</strong></td>
            <td style="padding:0.75rem">Non-stationary (random walk)</td>
            <td style="padding:0.75rem;font-weight:600;color:#ef4444">‚ùå DO NOT TRADE (not cointegrated)</td>
          </tr>
        </tbody>
      </table>
      </div>

      <div class="callout-success" style="background:rgba(34,197,94,0.08);padding:1.5rem;border-radius:8px;margin:2rem 0;border-left:4px solid #22c55e">
        <h4>‚úÖ Rule of Thumb</h4>
        <p><strong>Only trade pairs with ADF p-value &lt; 0.05.</strong> This gives you 95% statistical confidence that the spread will mean-revert.</p>
        <p style="margin-top:0.75rem">If p-value &gt; 0.05, you're trading correlation, not cointegration‚Äîand that's gambling.</p>
      </div>

      <h3 id="calculating-hedge-ratio">Calculating the Hedge Ratio</h3>

      <p>Before running the ADF test, you need to determine the <strong>hedge ratio (Œ≤)</strong>‚Äîthe optimal proportion to balance the two assets in the pair.</p>

      <p><strong>Method:</strong> Run an Ordinary Least Squares (OLS) regression:</p>

      <p style="font-size:1.1rem;text-align:center;margin:1.5rem 0;background:var(--surface-2);padding:1rem;border-radius:8px">
        Asset A = Œ≤ √ó Asset B + Œµ
      </p>

      <p><strong>Œ≤ (beta) = hedge ratio</strong></p>

      <p><strong>Example: KO vs PEP</strong></p>
      <pre style="background:rgba(0,212,170,.05);padding:1rem;border-radius:6px;overflow-x:auto">
<strong>Step 1: Collect Historical Prices</strong>
KO (Coca-Cola): Last 252 days of closing prices
PEP (PepsiCo): Last 252 days of closing prices

<strong>Step 2: Run OLS Regression (KO = Œ≤ √ó PEP)</strong>
Using Python statsmodels or Excel LINEST function
Result: Œ≤ = 1.12

<strong>Interpretation:</strong>
For every $1 of PEP, you need $1.12 of KO to create a hedged pair.

<strong>Step 3: Calculate Spread</strong>
Spread = KO - (1.12 √ó PEP)

Example values:
- KO = $60.50
- PEP = $180.20
- Spread = $60.50 - (1.12 √ó $180.20) = $60.50 - $201.82 = -$141.32

<strong>Step 4: Run ADF Test on Spread</strong>
ADF Test Result: p-value = 0.018 ‚úÖ
Interpretation: Spread is stationary (cointegrated at 98% confidence)
Conclusion: KO/PEP is a tradeable pair
      </pre>

      <h3 id="real-example-spy-iwm-cointegration-test">Real Example: SPY/IWM Cointegration Test</h3>

      <div style="overflow-x:auto;margin:1.5rem 0">
      <table style="width:100%;border-collapse:collapse">
        <thead>
          <tr style="background:rgba(255,255,255,0.03)">
            <th style="padding:0.75rem;text-align:left">Step</th>
            <th style="padding:0.75rem;text-align:left">Process</th>
            <th style="padding:0.75rem;text-align:left">Result</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding:0.75rem"><strong>1. Data Collection</strong></td>
            <td style="padding:0.75rem">Download 1 year of daily prices for SPY and IWM</td>
            <td style="padding:0.75rem">252 trading days</td>
          </tr>
          <tr>
            <td style="padding:0.75rem"><strong>2. Correlation Check</strong></td>
            <td style="padding:0.75rem">Calculate Pearson correlation</td>
            <td style="padding:0.75rem">r = 0.94 (high correlation)</td>
          </tr>
          <tr>
            <td style="padding:0.75rem"><strong>3. OLS Regression</strong></td>
            <td style="padding:0.75rem">SPY = Œ≤ √ó IWM + Œµ</td>
            <td style="padding:0.75rem">Œ≤ = 2.68 (hedge ratio)</td>
          </tr>
          <tr>
            <td style="padding:0.75rem"><strong>4. Spread Calculation</strong></td>
            <td style="padding:0.75rem">Spread = SPY - (2.68 √ó IWM)</td>
            <td style="padding:0.75rem">252 spread values</td>
          </tr>
          <tr style="background:rgba(34,197,94,0.08)">
            <td style="padding:0.75rem"><strong>5. ADF Test</strong></td>
            <td style="padding:0.75rem">Test if spread is stationary</td>
            <td style="padding:0.75rem;font-weight:600;color:#22c55e">p = 0.0082 ‚úÖ COINTEGRATED</td>
          </tr>
          <tr>
            <td style="padding:0.75rem"><strong>6. Half-Life</strong></td>
            <td style="padding:0.75rem">How long for 50% mean reversion?</td>
            <td style="padding:0.75rem">8.2 days (fast reversion)</td>
          </tr>
          <tr style="background:rgba(34,197,94,0.12)">
            <td style="padding:0.75rem"><strong>7. Conclusion</strong></td>
            <td style="padding:0.75rem">Is this pair tradeable?</td>
            <td style="padding:0.75rem;font-weight:600;color:#22c55e">YES - Trade the spread</td>
          </tr>
        </tbody>
      </table>
      </div>

      <div class="callout-danger">
        <h4>üö® Common Mistakes in Cointegration Testing</h4>
        <ul style="margin:0.5rem 0 0 1.5rem;line-height:1.8">
          <li><strong>Using too short a lookback period:</strong> Need at least 6-12 months of data for reliable ADF test. 1-3 months = unreliable.</li>
          <li><strong>Not recalculating Œ≤ regularly:</strong> Hedge ratios drift over time. Recalculate monthly or you'll trade the wrong spread.</li>
          <li><strong>Ignoring p-value drift:</strong> A pair cointegrated in January may decointegrate by June. Re-test monthly.</li>
          <li><strong>Testing only once:</strong> Cointegration is dynamic, not static. Rolling window tests (6-month rolling) are essential.</li>
        </ul>
      </div>

      <div class="section-break"><span>Part 3: Z-Score Trading Models‚ÄîEntry & Exit Signals</span></div>

      <h2 id="z-score-the-trading-signal">Z-Score: The Trading Signal</h2>

      <p>Once you've confirmed cointegration (ADF p &lt; 0.05), you need a <strong>trading signal</strong> to tell you WHEN to enter and exit. That signal is the <strong>z-score</strong>.</p>

      <div class="callout-info" style="background:rgba(118,221,255,0.08);padding:1.5rem;border-radius:8px;margin:2rem 0;border-left:4px solid var(--accent)">
        <h4>üìê Z-Score Formula</h4>
        <p style="font-size:1.1rem;text-align:center;margin:1rem 0;background:var(--surface-2);padding:1rem;border-radius:8px">
          Z = (Current Spread - Mean Spread) / Standard Deviation of Spread
        </p>
        <p><strong>What it measures:</strong> How many standard deviations the current spread is from its historical mean.</p>
        <ul style="margin:0.5rem 0 0 1.5rem;line-height:1.8">
          <li><strong>Z = 0:</strong> Spread is at its mean (no trade)</li>
          <li><strong>Z = +2:</strong> Spread is 2 standard deviations ABOVE mean (Asset A expensive, Asset B cheap)</li>
          <li><strong>Z = -2:</strong> Spread is 2 standard deviations BELOW mean (Asset A cheap, Asset B expensive)</li>
        </ul>
      </div>

      <h3 id="z-score-trading-frameworks">Z-Score Trading Frameworks</h3>

      <div class="tabs">
        <div class="tabs-nav">
          <button>Conservative Model</button>
          <button>Aggressive Model</button>
        </div>
        <div class="tabs-content">
          <div class="tab-panel">
            <h3 id="conservative-z-score-model">Conservative Z-Score Model</h3>
            <ul>
              <li><strong>Entry:</strong> |Z| > 2.0 (spread is 2+ std devs from mean)</li>
              <li><strong>Exit:</strong> Z crosses back through 0 (mean reversion)</li>
              <li><strong>Stop Loss:</strong> |Z| > 3.5 (spread widening, cut losses)</li>
            </ul>
            <p style="margin-top:1rem"><strong>Why Conservative:</strong></p>
            <ul>
              <li>Z > 2 means 95% confidence the spread is abnormal</li>
              <li>Fewer false signals, higher win rate</li>
              <li>Lower frequency (fewer trades)</li>
            </ul>
          </div>
          <div class="tab-panel">
            <h3 id="aggressive-z-score-model">Aggressive Z-Score Model</h3>
            <ul>
              <li><strong>Entry:</strong> |Z| > 1.5 (more frequent signals)</li>
              <li><strong>Partial Exit:</strong> Z crosses 0.5 (take some profit)</li>
              <li><strong>Full Exit:</strong> Z crosses 0 (mean)</li>
              <li><strong>Stop Loss:</strong> |Z| > 3.0</li>
            </ul>
            <p style="margin-top:1rem"><strong>Why Aggressive:</strong></p>
            <ul>
              <li>More trades = more opportunities</li>
              <li>Lower threshold = earlier entries</li>
              <li>Requires tighter risk management</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="callout-key">
        <h4>üí° Real-World Application</h4>
        <p><strong>Spread = $5.20</strong><br>
        <strong>Mean Spread = $5.00</strong><br>
        <strong>Std Dev = $0.10</strong></p>
        <p><strong>Z-score = ($5.20 - $5.00) / $0.10 = 2.0</strong></p>
        <p><strong>Action:</strong> Asset A is relatively expensive, Asset B is relatively cheap</p>
        <p><strong>Trade:</strong> Short Asset A, Long Asset B (expect convergence)</p>
      </div>
<h3 id="half-life-how-long-until-reversion">Half-Life: How Long Until Reversion?</h3>

      <p>The half-life tells you how many periods it takes for the spread to revert halfway back to the mean. This informs your holding period.</p>
<div class="callout-info" style="background:rgba(0,212,170,0.1);border-left:4px solid #00d4aa;margin:2rem 0">
  <p>You're now at the halfway point. You've learned the key strategies.</p>
  <p style="margin-top:0.5rem;font-size:0.9rem">Great progress! Take a quick stretch break if needed, then we'll dive into the advanced concepts ahead.</p>
</div>

      <div class="callout-info">
        <h4>üìñ Calculating Half-Life</h4>
        <p>Use an AR(1) model (autoregressive) on the spread:</p>
        <p style="text-align:center;margin:1rem 0">Spread<sub>t</sub> = Œ∏ √ó Spread<sub>t-1</sub> + Œµ</p>
        <p><strong>Half-Life = -log(2) / log(Œ∏)</strong></p>
        <p><strong>Example:</strong> If Œ∏ = 0.95, Half-Life ‚âà 14 days</p>
        <p><strong>Implication:</strong> Expect mean reversion within ~14 days. If it takes 30+ days, your model may be breaking down.</p>
      </div>

      <div class="section-break"><span>Part 4: Position Sizing & Risk Management</span></div>
<h2 id="how-much-to-allocate-per-trade">How Much to Allocate Per Trade</h2>

      <p>Statistical arbitrage is NOT "set it and forget it." Spreads can widen before they converge (drawdowns), and some pairs decointegrate over time.</p>

      <h3 id="kelly-criterion-for-stat-arb">Kelly Criterion for Stat Arb</h3>

      <p>Use a modified Kelly approach:</p>

      <p style="font-size:1.1rem;text-align:center;margin:1.5rem 0;background:var(--surface-2);padding:1rem;border-radius:8px">f* = (p √ó b - q) / b</p>

      <p>Where:</p>
      <ul>
        <li><strong>p</strong> = win rate (historical % of profitable mean reversions)</li>
        <li><strong>q</strong> = loss rate (1 - p)</li>
        <li><strong>b</strong> = average win / average loss</li>
        <li><strong>f*</strong> = optimal fraction of capital to risk</li>
      </ul>

      <div class="callout-warning">
        <h4>üö® Never Risk More Than 2-5% Per Pair</h4>
        <p>Even if Kelly suggests 10%, stat arb models can fail (decointegration, regime change). Use half-Kelly or quarter-Kelly for safety:</p>
        <p><strong>Half-Kelly:</strong> f* / 2<br>
        <strong>Quarter-Kelly:</strong> f* / 4</p>
        <p>This protects you from model potential breakdown while still capturing edge.</p>
      </div>
<h3 id="portfolio-of-pairs-diversification">Portfolio of Pairs: Diversification</h3>

      <p>Don't run just one pair. Build a portfolio of 5-10 cointegrated pairs across different sectors to reduce idiosyncratic risk.</p>

      <div class="callout-tip">
        <p><strong>Example Portfolio:</strong> KO/PEP (Consumer), XOM/CVX (Energy), JPM/BAC (Finance), AAPL/MSFT (Tech), UNH/CVS (Healthcare). 2% per pair, 10% total risk, diversified if one decointegrates.</p>
      </div>

      <div class="section-break"><span>Part 5: When Stat Arb Fails</span></div>
<h2 id="regime-changes-decointegration">Regime Changes & Decointegration</h2>

      <p>Statistical arbitrage works‚Äîuntil it doesn't. Pairs can <strong>decointegrate</strong> due to:</p>

      <ul>
        <li><strong>Corporate Actions:</strong> Mergers, spinoffs, dividend changes</li>
        <li><strong>Structural Shifts:</strong> One company changes business model</li>
        <li><strong>Macro Regime Change:</strong> Interest rate shocks, sector rotation</li>
        <li><strong>Liquidity Drying Up:</strong> Can't potential exit the position without slippage</li>
      </ul>

      <div class="callout-warning">
        <h4>üö® LTCM Collapse (1998)</h4>
        <p>Nobel Prize-winning stat arb fund lost $4.6B when Russian debt crisis caused spreads to widen beyond historical norms (z-score hit 10+). <strong>Lesson:</strong> Models assume normal distributions. Black swan events break assumptions. Always have stop losses.</p>
      </div>
<h3 id="stop-loss-rules-for-stat-arb">Stop Loss Rules for Stat Arb</h3>

      <ul>
        <li><strong>Z-Score Stop:</strong> Exit if |Z| > 3.5 (spread widening, not reverting)</li>
        <li><strong>Time Stop:</strong> Exit if position is open > 2√ó half-life (model failing)</li>
        <li><strong>Dollar Stop:</strong> Exit if drawdown exceeds 50% of expected profit</li>
        <li><strong>Correlation Breakdown:</strong> Exit if ADF p-value goes above 0.10 (losing cointegration)</li>
      </ul>

      <div class="section-break"><span>Part 6: Practical Implementation</span></div>
<h2 id="building-your-stat-arb-system">Building Your Stat Arb System</h2>

      <p>Step-by-step process for running statistical arbitrage:</p>

      <div class="callout-info">
        <p><strong>Step 1 - Discovery:</strong> Screen same-sector stocks with similar market cap and >0.7 correlation.</p>
        <p><strong>Step 2 - Test:</strong> ADF test on spread (6-12 months data). p<0.05 = pass, p>0.05 = reject.</p>
        <p><strong>Step 3 - Backtest:</strong> Entry |Z|>2, exit Z=0. Target: Sharpe >1.5, win rate >60%, half-life 5-30 days.</p>
        <p><strong>Step 4 - Monitor:</strong> Daily z-score, spread volatility, correlation. Re-run ADF monthly.</p>
      </div>

      <div class="callout-tip">
        <p><strong>Pro Tip:</strong> Use rolling 6-month window to recalculate Œ≤ monthly. Exit if p-value drifts >0.10 (decointegrating).</p>
      </div>

      <div class="section-break"><span>Part 7: Advanced Strategies‚ÄîIntraday Statistical Arbitrage</span></div>
<h2 id="high-frequency-mean-reversion-for-active-traders">High-Frequency Mean Reversion (For Active Traders)</h2>

      <p>Most stat arb is swing trading (holding 5-30 days), but cointegration also works on intraday timeframes‚Äîif you have the infrastructure.</p>

      <h3 id="requirements-for-intraday-stat-arb">Requirements for Intraday Stat Arb</h3>

      <ul>
        <li><strong>Low Latency Execution:</strong> Sub-second fills required (DMA or sponsored access)</li>
        <li><strong>High-Liquidity Pairs:</strong> SPY/IWM, QQQ/DIA, sector ETFs only</li>
        <li><strong>Tight Spreads:</strong> Commission + slippage must be <0.02% per trade</li>
        <li><strong>Automated System:</strong> Manual trading too slow for 5-minute half-lives</li>
      </ul>

      <div class="accordion">
        <details class="accordion-item">
          <summary class="accordion-header">Example: SPY vs IWM Intraday Pairs</summary>
          <div class="accordion-content">
            <p><strong>Setup:</strong> SPY/IWM, correlation 0.92 (5-min), ADF p=0.009‚úÖ, half-life 12 bars (60 min)</p>
            <p><strong>Rules:</strong> Entry |Z| > 1.8, exit when Z crosses 0 OR 90 min elapsed</p>
            <p><strong>Example (Nov 15, 2024):</strong> 10:35 AM z=-1.95 ‚Üí Long 200 SPY, Short 530 IWM ‚Üí 11:20 AM z=+0.12 ‚Üí Exit +$142 (45 min, 0.12%)</p>
            <p style="color:var(--success)"><strong>Scalability:</strong> 8-12√ó per day, $50-200 each. Monthly: ~3-5% with minimal overnight risk.</p>
          </div>
        </details>

        <details class="accordion-item">
          <summary class="accordion-header">Intraday Stat Arb Risks</summary>
          <div class="accordion-content">
            <p><strong>Why Retail Fails:</strong> Commission overhead ($0.005/share √ó 2 legs), slippage on large size, 40-50% false signals from intraday noise, need algo platform.</p>
            <p><strong>Requirements:</strong> >$100K capital, professional routing (IBKR Pro, Lightspeed), automated execution.</p>
            <p><strong>Avoid if:</strong> Beginner, using Robinhood/Webull, or trading manually.</p>
          </div>
        </details>
      </div>

      <div class="section-break"><span>Part 8: Portfolio Construction for Stat Arb</span></div>
<h2 id="building-a-diversified-stat-arb-book">Building a Diversified Stat Arb Book</h2>

      <p>Single-pair trading is risky (decointegration can wipe you out). Professional stat arb traders run portfolios of 10-30 pairs simultaneously.</p>

      <h3 id="example-portfolio-allocation">Example Portfolio Allocation</h3>

      <div class="tabs">
        <div class="tabs-nav">
          <button>Conservative</button>
          <button>Moderate</button>
          <button>Aggressive</button>
        </div>
        <div class="tabs-content">
          <div class="tab-panel">
            <h3 id="conservative-stat-arb-portfolio-100k-account">Conservative ($100K)</h3>
            <p><strong>5 pairs, 2% each:</strong> KO/PEP, JPM/BAC, XOM/CVX, UNH/CVS, WMT/TGT</p>
            <p><strong>Total Risk:</strong> 10% | <strong>Sharpe:</strong> 1.5-2.0 | <strong>Return:</strong> 12-18% | <strong>Max DD:</strong> -8% to -12%</p>
          </div>
          <div class="tab-panel">
            <h3 id="moderate-stat-arb-portfolio-100k-account">Moderate ($100K)</h3>
            <p><strong>10 pairs, 1.5% each:</strong> Daily (6): Conservative + MA/V, DIS/CMCSA | Intraday (4): SPY/IWM, QQQ/DIA, XLF/XLK, XLE/XLU</p>
            <p><strong>Total Risk:</strong> 15% | <strong>Sharpe:</strong> 2.0-2.5 | <strong>Return:</strong> 20-30% | <strong>Max DD:</strong> -12% to -18%</p>
          </div>
          <div class="tab-panel">
            <h3 id="aggressive-stat-arb-portfolio-100k-account">Aggressive ($100K)</h3>
            <p><strong>20+ pairs, 1% each:</strong> 8 daily blue-chips + 12 intraday ETFs | 1.5√ó leverage</p>
            <p><strong>Total Risk:</strong> 20-30% | <strong>Sharpe:</strong> 2.5-3.5 | <strong>Return:</strong> 35-50% | <strong>Max DD:</strong> -20% to -30%</p>
            <p style="color:var(--warning)"><strong>Warning:</strong> Requires full-time monitoring and professional execution</p>
          </div>
        </div>
      </div>

      <div class="callout-warning">
        <h4>üö® Correlation Between Pairs (Hidden Risk)</h4>
        <p><strong>Bad:</strong> KO/PEP, MDLZ/GIS, K/CPB (all food)‚Äîsector crash kills ALL pairs.</p>
        <p><strong>Good:</strong> KO/PEP (consumer) + JPM/BAC (finance) + XOM/CVX (energy)‚Äîsector diversification means uncorrelated performance.</p>
      </div>
<h3 id="rebalancing-your-stat-arb-portfolio">Rebalancing Your Stat Arb Portfolio</h3>

      <div class="callout-info">
        <h4>üìñ Monthly Maintenance</h4>
        <p><strong>1st of Every Month:</strong> Re-run ADF tests, recalculate hedge ratios, update z-score thresholds, remove p>0.10 pairs, add new pairs. <strong>Example:</strong> KO/PEP p-value drifts Jan 0.021‚úÖ ‚Üí Apr 0.124‚ùå = REMOVE.</p>
      </div>

      <div class="section-break"><span>Part 9: Code Implementation (Python Example)</span></div>
<h2 id="building-your-stat-arb-system-from-scratch">Building Your Stat Arb System from Scratch</h2>

      <p><strong>Implementation Framework (3-Step Process):</strong></p>

      <div style="background:rgba(118,221,255,.08);border-left:4px solid var(--accent);border-radius:8px;padding:1.5rem;margin:1.5rem 0">
        <h4 style="margin-top:0">Step 1: Testing for Cointegration</h4>
        <p><strong>Process:</strong> (1) Run OLS regression to find hedge ratio Œ≤ (e.g., KO = Œ≤ √ó PEP), (2) Calculate spread (KO - Œ≤ √ó PEP), (3) Run Augmented Dickey-Fuller (ADF) test on spread. If p-value < 0.05 = cointegrated. (4) Calculate half-life (mean reversion speed) using spread lag regression.</p>
        <p><strong>Example:</strong> KO/PEP Œ≤ = 0.92, spread p-value = 0.018 (‚úÖ cointegrated), half-life = 12.3 days (mean reversion completes in ~12 days).</p>
      </div>

      <div style="background:rgba(139,92,246,.08);border-left:4px solid #8b5cf6;border-radius:8px;padding:1.5rem;margin:1.5rem 0">
        <h4 style="margin-top:0">Step 2: Calculating Z-Score Signals</h4>
        <p><strong>Process:</strong> Calculate 60-day rolling z-score: z = (spread - spread_mean) / spread_std. Set thresholds: Entry ¬±2.0œÉ, Exit 0.0œÉ (mean reversion), Stop ¬±3.5œÉ (breakdown).</p>
        <p><strong>Signals:</strong> Z-score < -2.0 = Long spread (buy KO, sell PEP). Z-score > +2.0 = Short spread (sell KO, buy PEP). Z-score crosses 0 = Exit (mean reversion complete). Z-score > ¬±3.5 = Stop loss (cointegration broke).</p>
      </div>

      <div style="background:rgba(0,212,170,.08);border-left:4px solid #00d4aa;border-radius:8px;padding:1.5rem;margin:1.5rem 0">
        <h4 style="margin-top:0">Step 3: Backtesting the Strategy</h4>
        <p><strong>Process:</strong> Iterate through historical data, track position state (long/short/flat), enter at ¬±2.0œÉ thresholds, exit at 0œÉ or ¬±3.5œÉ stop. Calculate metrics: win rate, avg win/loss, profit factor, total PnL.</p>
        <p><strong>Target Metrics:</strong> Win rate >55%, profit factor >1.5, Sharpe ratio >1.2, max DD <15%. If backtest fails thresholds, pair likely not tradable (insufficient mean reversion or high transaction costs eating edge).</p>
      </div>

      <p style="margin-top:1.5rem;padding:1rem;background:rgba(118,221,255,.1);border-radius:8px"><strong>üí° Implementation:</strong> Use Python libraries (statsmodels for ADF test, pandas for data handling) or platforms like QuantConnect/Zipline. Full code examples available in community repository.</p>

      <div class="callout-tip">
        <p><strong>Live Trading Tips:</strong> Paper trade 1-3 months first. Start 0.5-1% sizes. Monitor slippage (>0.05% = reduce size). Log every trade: z-score entry/exit, hold time, P&L.</p>
      </div>

      <div class="section-break"><span>Key Takeaways</span></div>

      <div class="callout-key">
        <h4>üí° Statistical Arbitrage Checklist</h4>
        <ul>
          <li><strong>Cointegration > Correlation:</strong> Always validate with ADF test (p < 0.05)</li>
          <li><strong>Z-Score Entry:</strong> |Z| > 2.0 for conservative, > 1.5 for aggressive</li>
          <li><strong>Stop Losses:</strong> Exit if |Z| > 3.5 or position open > 2√ó half-life</li>
          <li><strong>Position Sizing:</strong> Never more than 2-5% per pair (use Kelly/half-Kelly)</li>
          <li><strong>Diversify Pairs:</strong> Run 5-10 pairs across different sectors</li>
          <li><strong>Monitor Continuously:</strong> Re-test cointegration monthly, potential exit if breaking down</li>
          <li><strong>Portfolio Construction:</strong> Ensure pairs are uncorrelated with each other (sector diversity)</li>
          <li><strong>Intraday Trading:</strong> Only with professional execution and automation</li>
        </ul>
      </div>
      <p style="font-size:1.1rem;font-weight:500;margin:2rem 0">Statistical arbitrage is a quantitative edge‚Äîbut it requires discipline. If you execute this correctly, you're trading with mathematical precision instead of hope.</p>

      <div class="quiz">
        <h3>Test Your Understanding</h3>

        <div class="quiz-question">
          <p><strong>Q1: What was Derek's fatal mistake that led to his $31,400 loss trading ARKK/QQQ?</strong></p>
          <div class="quiz-options">
            <div class="quiz-option" data-correct="false">A) He used too much leverage on his positions</div>
            <div class="quiz-option" data-correct="true">B) He confused correlation (0.89) with cointegration and never ran an ADF test</div>
            <div class="quiz-option" data-correct="false">C) He traded with too small position sizes and couldn't recover losses</div>
            <div class="quiz-option" data-correct="false">D) He exited winners too early instead of holding through reversions</div>
          </div>
          <div class="quiz-feedback">
            <p><strong>Correct!</strong> Derek assumed 0.89 correlation meant mean-reversion. He never ran an ADF test. Correlation measures past similarity; cointegration validates a statistically stable equilibrium.</p>
          </div>
        </div>

        <div class="quiz-question">
          <p><strong>Q2: For a pairs trading strategy using statistical arbitrage, what ADF test p-value threshold indicates a valid cointegrated pair?</strong></p>
          <div class="quiz-options">
            <div class="quiz-option" data-correct="false">A) p-value > 0.10 (spread is non-stationary)</div>
            <div class="quiz-option" data-correct="true">B) p-value < 0.05 (spread is stationary and mean-reverting)</div>
            <div class="quiz-option" data-correct="false">C) p-value > 0.50 (high statistical confidence)</div>
            <div class="quiz-option" data-correct="false">D) p-value = 1.0 (perfect cointegration)</div>
          </div>
          <div class="quiz-feedback">
            <p><strong>Correct!</strong> ADF p-value < 0.05 means the spread is stationary (mean-reverting) with 95% confidence. If p-value > 0.05, don't trade it as stat arb.</p>
          </div>
        </div>

        <div class="quiz-question">
          <p><strong>Q3: According to the lesson's conservative z-score strategy, when should you enter a statistical arbitrage pairs trade?</strong></p>
          <div class="quiz-options">
            <div class="quiz-option" data-correct="false">A) When |z-score| > 1.0 (spread is 1 standard deviation from mean)</div>
            <div class="quiz-option" data-correct="true">B) When |z-score| > 2.0 (spread is 2+ standard deviations from mean)</div>
            <div class="quiz-option" data-correct="false">C) When |z-score| > 0.5 (any deviation from equilibrium)</div>
            <div class="quiz-option" data-correct="false">D) When z-score returns to 0 (spread at mean)</div>
          </div>
          <div class="quiz-feedback">
            <p><strong>Correct!</strong> Conservative entry: |z| > 2.0 (2+ std devs from mean). Exit when z returns to 0. Stop out if |z| > 3.5 (spread may be de-cointegrating).</p>
          </div>
        </div>

        <div class="quiz-question">
          <p><strong>Q4: What's the critical difference between correlation and cointegration?</strong></p>
          <div class="quiz-options">
            <div class="quiz-option" data-correct="false">A) Correlation is for stocks, cointegration is for futures only</div>
            <div class="quiz-option" data-correct="false">B) Correlation requires mathematical tests, cointegration can be eyeballed</div>
            <div class="quiz-option" data-correct="true">C) Correlation measures past directional similarity; cointegration means the spread has a mean-reverting equilibrium relationship</div>
            <div class="quiz-option" data-correct="false">D) There's no difference‚Äîthey're the same concept with different names</div>
          </div>
          <div class="quiz-feedback">
            <p><strong>Correct!</strong> Correlation = "moved together historically." Cointegration = "spread has mean-reverting equilibrium." Highly correlated pairs can drift apart permanently. Only cointegrated pairs can be traded as stat arb.</p>
          </div>
        </div>

        <div class="quiz-question">
          <p><strong>Q5: According to the lesson's risk management guidelines, what's the maximum position size per pair in statistical arbitrage?</strong></p>
          <div class="quiz-options">
            <div class="quiz-option" data-correct="false">A) 10-15% per pair (concentrated positions for maximum edge)</div>
            <div class="quiz-option" data-correct="true">B) 2-5% per pair (diversified across 5-10 pairs)</div>
            <div class="quiz-option" data-correct="false">C) 25-30% per pair (all-in on best setups)</div>
            <div class="quiz-option" data-correct="false">D) 0.5-1% per pair (ultra-conservative sizing)</div>
          </div>
          <div class="quiz-feedback">
            <p><strong>Correct!</strong> Max 2-5% per pair using Kelly/half-Kelly sizing. Run 5-10 pairs across sectors to diversify. If one pair de-cointegrates, it won't destroy your account.</p>
          </div>
        </div>
      </div>

      <h3 style="margin:2rem 0 1rem 0">Related Lessons</h3>
      <ul style="margin:0 0 0 1.5rem;line-height:2">
        <li><a href="/curriculum/advanced/64-macro-regime-framework.html">#64: Macro Regime Framework</a> ‚Äî How regime changes affect stat arb</li>
        <li><a href="/curriculum/advanced/66-quantitative-strategy-design.html">#66: Quantitative Strategy Design</a> ‚Äî Backtest stat arb strategies</li>
        <li><a href="/curriculum/advanced/67-machine-learning-trading.html">#67: Machine Learning in Trading</a> ‚Äî ML for pair selection</li>
      </ul>

      <div class="callout-info">
        <h4>‚è≠Ô∏è Coming Up Next</h4>
        <p><strong>Lesson #64: Macro Regime Framework</strong> ‚Äî Understand how regime changes affect your stat arb models and adapt your strategies accordingly.</p>
      </div>

      <!-- Discussion Section -->
      <div class="discussion-section" id="discussion-section">
        <button class="discussion-toggle" id="discussion-toggle" style="display:none">
          <span>üí¨ Discussion (<span id="discussion-count-mobile">0</span>)</span>
          <span class="discussion-toggle-icon">+</span>
        </button>
        <div class="discussion-content">
          <div class="discussion-header">
            <h2 class="discussion-title">üí¨ Discussion <span class="discussion-count" id="discussion-count">(0 comments)</span></h2>
            <div class="discussion-sort">
              <label for="discussion-sort">Sort by:</label>
              <select id="discussion-sort">
                <option value="recent">Most Recent</option>
                <option value="top">Top Voted</option>
                <option value="oldest">Oldest First</option>
              </select>
            </div>
          </div>
          <div class="comment-composer" id="comment-composer">
            <textarea id="comment-input" placeholder="Share your thoughts, ask questions, or discuss this lesson..." maxlength="1000"></textarea>
            <div class="comment-composer-actions">
              <span class="comment-char-count" id="comment-char-count">0/1000</span>
              <button class="btn btn-primary" id="post-comment-btn">Post Comment</button>
            </div>
          </div>
          <div class="comments-list" id="comments-list">
            <div class="comments-loading">
              <div class="comments-loading-spinner"></div>
              <p>Loading comments...</p>
            </div>
          </div>
        </div>
      </div>

      <div class="nav-article">
        <a class="btn btn-ghost" href="/curriculum/advanced/62-trading-career-path.html">‚Üê Previous Lesson</a>
        <a class="btn btn-primary" href="/curriculum/advanced/64-macro-regime-framework.html">Next Lesson ‚Üí</a>
      </div>
    </div>

    <aside class="toc-sidebar">
      <div class="lesson-actions">
        <button id="bookmark-btn" class="btn btn-secondary btn-sm btn-block" onclick="window.library?.isBookmarked() ? window.library.removeBookmark() : window.library.addBookmark({title:document.title})">üîñ Bookmark</button>
        <button onclick="window.print()" class="btn btn-secondary btn-sm btn-block">üìÑ Save PDF</button>
      </div>

      <div class="sidebar-links" style="margin-top:1.5rem">
        <a href="https://signalpilot.io" target="_blank" rel="noopener" style="display:block;color:var(--muted);text-decoration:none;padding:0.5rem 0">
          ‚ö° Signal Pilot Suite
        </a>
        <a href="https://discord.gg/5guVbGEyj8" target="_blank" rel="noopener" style="display:block;color:var(--muted);text-decoration:none;padding:0.5rem 0">
          üí¨ Discuss on Discord
        </a>
        <a href="https://signalpilot.io/affiliates.html" target="_blank" rel="noopener" style="display:block;color:var(--muted);text-decoration:none;padding:0.5rem 0">
          üí∞ Earn 15-30% as Affiliate
        </a>
      </div>
    </aside>
  </div>
</article>


<footer class="sp-footer"><div class="wrap"><div>¬© <span id="year"></span> Signal Pilot Labs, Inc.</div><div class="links"><a href="https://discord.gg/5guVbGEyj8" target="_blank" rel="noopener">Discuss on Discord</a><a href="https://signalpilot.io/affiliates.html">Affiliates</a><a href="https://signalpilot.io/privacy.html">Privacy</a><a href="https://signalpilot.io/terms.html">Terms</a></div></div></footer>

<!-- Lenis Smooth Scroll -->
<script src="https://unpkg.com/lenis@1.1.18/dist/lenis.min.js"></script>
<script src="/assets/lenis-init.js"></script>
<script src="/assets/edu.js"></script>
<script src="/assets/edu-enhanced.js"></script>
<script src="/assets/sp-bg.js"></script>
<script>
document.getElementById('year').textContent = new Date().getFullYear();
</script>
<!-- SignalPilot Theme Switcher -->
<script src="/assets/signalpilot-theme.js"></script>
<script src="/assets/spaced-repetition.js" defer></script>
<script src="/assets/chatbot.js" defer></script>
<script src="/assets/notes.js" defer></script>
<script src="/assets/analytics.js"></script>
<script src="/assets/quiz-enhanced.js"></script>
<script src="/assets/social-share.js"></script>
<script src="/assets/pwa-init.js"></script>
<script src="/assets/config.js"></script>
<script src="/assets/supabase-client.js"></script>
<script src="/assets/auth-ui.js"></script>
<script src="/assets/library.js"></script>
<script>window.addEventListener('load',function(){if(window.library?.isBookmarked()){var b=document.getElementById('bookmark-btn');if(b)b.innerHTML='‚≠ê Bookmarked'}})</script>
  <!-- Enhanced Analytics & A/B Testing -->
  <script src="/assets/enhanced-analytics.js" defer></script>
  <script src="/assets/ab-test-tldr.js" defer></script>
  <!-- Google Translate -->
  <script src="/assets/lang-switcher.js"></script>
  <!-- Discussion System -->
    <script src="/assets/trial-cta.js"></script>
  <script src="/assets/blog-links.js"></script>
  <script src="/assets/discussions.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (window.DiscussionSystem) {
        window.DiscussionSystem.init('advanced-63-statistical-arbitrage');
      }
    });
  </script>
</body>
</html>