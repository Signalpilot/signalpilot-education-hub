/* ==================================================
   BACKGROUND MODULE
   Background effects (stars, aurora, gradients)
   ================================================== */

.bg-stars{position:fixed;inset:0;z-index:-3;pointer-events:none;opacity:.70;background:radial-gradient(1px 1px at 10% 20%, rgba(255,255,255,.9), transparent 60%),radial-gradient(1px 1px at 30% 80%, rgba(255,255,255,.7), transparent 60%),radial-gradient(1px 1px at 70% 30%, rgba(255,255,255,.8), transparent 60%),radial-gradient(1px 1px at 85% 60%, rgba(255,255,255,.8), transparent 60%),radial-gradient(1px 1px at 55% 10%, rgba(255,255,255,.7), transparent 60%),radial-gradient(1px 1px at 15% 55%, rgba(255,255,255,.7), transparent 60%),radial-gradient(1px 1px at 44% 74%, rgba(255,255,255,.7), transparent 60%),radial-gradient(1px 1px at 78% 88%, rgba(255,255,255,.7), transparent 60%);filter: drop-shadow(0 0 2px rgba(255,255,255,.25))}
.sp-constellations{position:fixed;inset:0;z-index:-2;pointer-events:none}

/* Animated Aurora Gradient Background */
.bg-aurora{
  position:fixed;
  inset:0;
  z-index:-1;
  pointer-events:none;
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(91,138,255,.28), transparent 50%),
    radial-gradient(ellipse 60% 50% at 80% 50%, rgba(118,221,255,.22), transparent 50%),
    radial-gradient(ellipse 60% 50% at 20% 50%, rgba(123,155,255,.20), transparent 50%),
    radial-gradient(ellipse 80% 60% at 50% 100%, rgba(91,138,255,.15), transparent 50%);
  opacity:0.85;
  animation:aurora-shift 15s ease-in-out infinite;
  will-change:transform,opacity;
  -webkit-backface-visibility:hidden;
  backface-visibility:hidden;
}

@keyframes aurora-shift{
  0%,100%{
    opacity:0.85;
    transform:scale(1) translateY(0);
  }
  50%{
    opacity:1;
    transform:scale(1.05) translateY(-10px);
  }
}

html[data-theme="light"] .bg-aurora{
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(91,138,255,.12), transparent 50%),
    radial-gradient(ellipse 60% 50% at 80% 50%, rgba(118,221,255,.10), transparent 50%),
    radial-gradient(ellipse 60% 50% at 20% 50%, rgba(123,155,255,.08), transparent 50%),
    radial-gradient(ellipse 80% 60% at 50% 100%, rgba(91,138,255,.08), transparent 50%);
  opacity:0.6;
}

/* Enhanced Hero Section with Gradient */
.hero{
  position:relative;
  overflow:hidden;
}

.hero::before{
  content:'';
  position:absolute;
  inset:-50%;
  background:
    radial-gradient(circle at 30% 20%, rgba(91,138,255,.4), transparent 40%),
    radial-gradient(circle at 70% 60%, rgba(118,221,255,.35), transparent 40%),
    radial-gradient(circle at 50% 80%, rgba(123,155,255,.3), transparent 50%);
  animation:hero-gradient-rotate 20s linear infinite;
  z-index:0;
  filter:blur(60px);
  will-change:transform;
  -webkit-backface-visibility:hidden;
  backface-visibility:hidden;
}

@keyframes hero-gradient-rotate{
  0%{transform:rotate(0deg) scale(1);}
  50%{transform:rotate(180deg) scale(1.1);}
  100%{transform:rotate(360deg) scale(1);}
}

  .bg-aurora{
    opacity:0.6;
    animation:aurora-shift 20s ease-in-out infinite;
  }

  html[data-theme="light"] .bg-aurora{
    opacity:0.4;
  }

  /* Module cards mobile */
  .module-card .module-header{
    flex-direction:column;
    gap:.5rem;
  }

  .module-card .module-number{
    font-size:1.5rem;
    min-width:auto;
  }
}

@media (max-width:480px){
  body{font-size:15px;line-height:1.65}

  /* Hero mobile optimization */
  .hero{
    padding:1.5rem 0 1rem;
  }

  .hero::before{
    filter:blur(30px);
    inset:-40%;
  }

  .bg-aurora{
    opacity:0.5;
  }

  .bg-aurora{
    opacity:0.4;
  }
}

/* Tablet-specific optimizations (portrait) */
@media (min-width:768px) and (max-width:1024px){
  .module-card{
    padding:1.75rem;
  }

  .progress-stats{
    grid-template-columns:repeat(4,1fr);
  }

  .hero{
    padding:2.5rem 0 2rem;
  }
}

/* Landscape phone optimization */
@media (max-height:450px) and (orientation:landscape){
  .hero{
    min-height:auto;
    padding:1rem 0 .75rem;
  }

  .bg-aurora{
    animation:none !important;
  }

  .hero::before{
    transform:none;
  }

  *{
    animation-duration:0.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.01ms !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high){
  .bg-stars,.bg-aurora{
    animation:none !important;
  }
}

/* Dark Mode Preference (System) */
@media (prefers-color-scheme: dark){
  html:not([data-theme]){
    color-scheme:dark;
  }
}

/* Light Mode Preference (System) */
@media (prefers-color-scheme: light){
  html:not([data-theme]){
    color-scheme:light;
  }
}

/* Low Bandwidth / Save Data Mode */
@media (prefers-reduced-data: reduce){
  /* Disable background animations */
  .bg-stars,.bg-aurora,.hero::before{
    display:none !important;
  }

  /* Reduce image quality needs to be handled by img srcset */

  /* Disable non-essential animations */
  .card,.module-card,.progress-card{
    animation:none !important;
  }
}

/* Print Optimization */
@media print{